!function(){"use strict";var f=self,n=f.WebSharper=f.WebSharper||{},t=n.JavaScript=n.JavaScript||{},e=t.JS=t.JS||{},h=f.Error,r=t.NonStandardPromiseRejectionException=t.NonStandardPromiseRejectionException||{},o=t.Promise=t.Promise||{},i=t.Pervasives=t.Pervasives||{},l=n.Json=n.Json||{},u=n.Obj=n.Obj||{},p=n.Remoting=n.Remoting||{},a=p.XhrProvider=p.XhrProvider||{},c=p.AjaxRemotingProvider=p.AjaxRemotingProvider||{},s=f.StartupCode$WebSharper_Main$Remoting=f.StartupCode$WebSharper_Main$Remoting||{},d=n.HtmlContentExtensions=n.HtmlContentExtensions||{},y=d.SingleNode=d.SingleNode||{},$=d.IControlBody=d.IControlBody||{},g=n.Activator=n.Activator||{},m=f.StartupCode$WebSharper_Main$Html=f.StartupCode$WebSharper_Main$Html||{},v=n.Collections=n.Collections||{},w=v.EqualityComparer=v.EqualityComparer||{},C=n.Comparers=n.Comparers||{},N=C.EquatableEqualityComparer=C.EquatableEqualityComparer||{},x=C.BaseEqualityComparer=C.BaseEqualityComparer||{},E=v.Comparer=v.Comparer||{},S=C.ComparableComparer=C.ComparableComparer||{},k=C.BaseComparer=C.BaseComparer||{},b=n.Operators=n.Operators||{},D=n.Nullable=n.Nullable||{},T=n.Utils=n.Utils||{},A=n.Concurrency=n.Concurrency||{},I=A.CT=A.CT||{},P=A.AsyncBody=A.AsyncBody||{},F=A.Scheduler=A.Scheduler||{},q=f.StartupCode$WebSharper_Main$Concurrency=f.StartupCode$WebSharper_Main$Concurrency||{},G=n.Enumerator=n.Enumerator||{},O=G.T=G.T||{},B=t.Optional=t.Optional||{},M=n.Arrays=n.Arrays||{},W=n.Seq=n.Seq||{},R=n.List=n.List||{},L=n.Arrays2D=n.Arrays2D||{},j=n.CancellationTokenSource=n.CancellationTokenSource||{},_=n.Char=n.Char||{},V=n.Util=n.Util||{},H=n.DateUtil=n.DateUtil||{},K=n.DateTimeOffset=n.DateTimeOffset||{},z=n.Delegate=n.Delegate||{},U=v.DictionaryUtil=v.DictionaryUtil||{},J=v.KeyCollection=v.KeyCollection||{},X=v.ValueCollection=v.ValueCollection||{},Y=v.Dictionary=v.Dictionary||{},Z=n.Exception=n.Exception||{},Q=n.MatchFailureException=n.MatchFailureException||{},nn=n.IndexOutOfRangeException=n.IndexOutOfRangeException||{},tn=n.OperationCanceledException=n.OperationCanceledException||{},en=n.ArgumentException=n.ArgumentException||{},rn=n.ArgumentOutOfRangeException=n.ArgumentOutOfRangeException||{},on=n.ArgumentNullException=n.ArgumentNullException||{},un=n.InvalidOperationException=n.InvalidOperationException||{},an=n.AggregateException=n.AggregateException||{},cn=n.TimeoutException=n.TimeoutException||{},sn=n.FormatException=n.FormatException||{},ln=n.OverflowException=n.OverflowException||{},fn=n.TaskCanceledException=n.TaskCanceledException||{},hn=n.KeyNotFoundException=n.KeyNotFoundException||{},pn=f.System=f.System||{},dn=pn.Guid=pn.Guid||{},yn=v.HashSetUtil=v.HashSetUtil||{},$n=v.HashSet=v.HashSet||{},gn=pn.Collections=pn.Collections||{},mn=gn.DictionaryEntry=gn.DictionaryEntry||{},vn=n.LazyExtensionsProxy=n.LazyExtensionsProxy||{},wn=vn.LazyRecord=vn.LazyRecord||{},Cn=n.Lazy=n.Lazy||{},Nn=R.T=R.T||{},xn=n.Slice=n.Slice||{},En=n.Option=n.Option||{},Sn=n.Queue=n.Queue||{},kn=n.Random=n.Random||{},bn=n.Ref=n.Ref||{},Dn=n.Result=n.Result||{},Tn=n.Control=n.Control||{},An=n.Stack=n.Stack||{},In=n.Strings=n.Strings||{},Pn=n.Task=n.Task||{},Fn=n.Task1=n.Task1||{},qn=n.TaskCompletionSource=n.TaskCompletionSource||{},Gn=n.Unchecked=n.Unchecked||{},pn=f.Microsoft=f.Microsoft||{},vn=pn.FSharp=pn.FSharp||{},pn=vn.Core=vn.Core||{},On=pn.FSharpValueOption=pn.FSharpValueOption||{},vn=n.ValueOption=n.ValueOption||{},Bn=n.Numeric=n.Numeric||{},pn=f.IntelliFactory,Mn=pn&&pn.Runtime,Wn=f.Promise,Rn=f.JSON,Ln=f.String,jn=f.Date,_n=f.console,Vn=f.Math;e.GetFieldValues=function(n){var t,e=[];for(t in n)e.push(n[t]);return e},e.GetFieldNames=function(n){var t,e=[];for(t in n)e.push(t);return e},e.GetFields=function(n){var t,e=[];for(t in n)e.push([t,n[t]]);return e},(r=t.NonStandardPromiseRejectionException=Mn.Class({get_Reason:function(){return this.reason}},h,r)).New=Mn.Ctor(function(n){this.message="Promise rejected",f.Object.setPrototypeOf(this,r.prototype),this.reason=n},r),o.For=function(n,t){var e;return e=G.Get(n),new Wn(function(n){!function n(){return e.MoveNext()?t(e.Current()).then(n):Wn.resolve(null)}(),n()}).finally(function(){return e.Dispose()})},o.AsTask=function(n){var t=new qn.New;return n.then(function(n){return t.SetResult(n)},function(n){return t.SetException$1(o.unwrapExn(n))}),t.get_Task()},o.AsAsync=function(e){return A.FromContinuations(function(n,t){e.then(n,function(n){return t(o.unwrapExn(n))})})},o.OfTask=function(n){return new Wn(function(t,e){n.ContinueWith$1(function(n){return n.get_IsCanceled()?e(new fn.New):n.get_IsFaulted()?e(n.get_Exception()):t(n.get_Result())},A.noneCT())})},o.OfAsync=function(e){return new Wn(function(n,t){A.StartWithContinuations(e,n,function(n){t(n)},function(n){t(n)},null)})},o.unwrapExn=function(n){return n instanceof h?n:new r.New(n)},i.GetJS=function(n,t){var e=n,r=G.Get(t);try{for(;r.MoveNext();)e=e[r.Current()]}finally{"object"==typeof r&&"Dispose"in r&&r.Dispose()}return e},i.NewFromSeq=function(n){var t,e={},r=G.Get(n);try{for(;r.MoveNext();)e[(t=r.Current())[0]]=t[1]}finally{"object"==typeof r&&"Dispose"in r&&r.Dispose()}return e},l.Activate=function(n){var t,u,e,r,o,i,a;if(void 0===(u=n?n.$TYPES:void 0))t=n;else{for(e=0,r=M.length(u)-1;e<=r;e++){switch(a=M.get(u,e),Gn.Equals(a,null)||3!==a.length?!Gn.Equals(a,null)&&2===a.length&&"WebSharper"===M.get(a,0)&&"Decimal"===M.get(a,1)?1:(i=a,2):"WebSharper"===M.get(a,0)&&"List"===M.get(a,1)&&"T"===M.get(a,2)?0:(i=a,2)){case 0:o=1;break;case 1:o=2;break;case 2:o=l.lookup(i)}M.set(u,e,o)}t=n.$DATA}return function n(t){var e,r,o,i;if(Gn.Equals(t,null))return t;if("object"!=typeof t)return t;if(t instanceof f.Array)return l.shallowMap(n,t);if(e=l.shallowMap(n,t.$V),void 0===(r=t.$T))return e;if(1===(t=M.get(u,r)))return R.ofArray(e);if(2===t)return self.WebSharper.Decimal.CreateDecimalBits(e);for(i in o=new(M.get(u,r)),e)o[i]=e[i];return o}(t)},l.shallowMap=function(n,t){var e,r;if(t instanceof f.Array)return M.map(n,t);if("object"!=typeof t)return t;for(r in e={},t)void(e[r]=n(t[r]));return e},l.lookup=function(n){for(var t,e,r=M.length(n),o=self,i=0;i<r;)e=o[t=M.get(n,i)],Gn.Equals(typeof e,void 0)?b.FailWith("Invalid server reply. Failed to find type: "+t):(o=e,i+=1);return o},(u=n.Obj=Mn.Class({Equals:function(n){return this===n},GetHashCode:function(){return-1}},null,u)).New=Mn.Ctor(function(){},u),(a=p.XhrProvider=Mn.Class({Sync:function(n,t,e){var r=[null];return p.ajax(!1,n,t,e,function(n){r[0]=n},function(n){throw n},function(){p.ajax(!1,n,t,e,function(n){r[0]=n},function(n){throw n},void 0)}),r[0]},Async:function(n,t,e,r,o){p.ajax(!0,n,t,e,r,o,function(){p.ajax(!0,n,t,e,r,o,void 0)})}},u,a)).New=Mn.Ctor(function(){u.New.call(this)},a),(c=p.AjaxRemotingProvider=Mn.Class({get_EndPoint:function(){return p.EndPoint()},AsyncBase:function(n,t){var s=this;return A.Delay(function(){var a=p.makeHeaders(n),c=p.makePayload(t);return A.Bind(A.GetCT(),function(u){return A.FromContinuations(function(t,e,n){var r,o,i;return r=[!0],o=A.Register(u,function(){r[0]&&(r[0]=!1,n(new tn.New(u)))}),i=s.get_EndPoint(),p.AjaxProvider().Async(i,a,c,function(n){r[0]&&(r[0]=!1,o.Dispose(),t(l.Activate(Rn.parse(n))))},function(n){r[0]&&(r[0]=!1,o.Dispose(),e(n))})})})})},Send:function(n,t){A.Start(this.AsyncBase(n,t),null)},Task:function(n,t){return A.StartAsTask(this.AsyncBase(n,t),null)},Async:function(n,t){return this.AsyncBase(n,t)},Sync:function(n,t){var e;return l.Activate(Rn.parse((e=this.get_EndPoint(),n=p.makeHeaders(n),t=p.makePayload(t),p.AjaxProvider().Sync(e,n,t))))}},u,c)).New=Mn.Ctor(function(){u.New.call(this)},c),p.ajax=function(n,t,e,r,o,i,u){var a,c=new f.XMLHttpRequest,s=f.document.cookie.replace(new f.RegExp("(?:(?:^|.*;)\\s*csrftoken\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1");for(a in c.open("POST",t,n),1==n&&(c.withCredentials=!0),e)c.setRequestHeader(a,e[a]);function l(){200==c.status?o(c.responseText):u&&403==c.status&&"CSRF"==c.responseText?u():i(new h("Response status is not 200: "+c.status))}s&&c.setRequestHeader("x-csrftoken",s),"onload"in c?c.onload=c.onerror=c.onabort=l:c.onreadystatechange=function(){4==c.readyState&&l()},c.send(r)},p.makePayload=function(n){return Rn.stringify(n)},p.makeHeaders=function(n){return{"content-type":"application/json","x-websharper-rpc":n}},p.AjaxProvider=function(){return s.$cctor(),s.AjaxProvider},p.set_AjaxProvider=function(n){s.$cctor(),s.AjaxProvider=n},p.UseHttps=function(){try{return!In.StartsWith(self.location.href,"https://")&&(p.set_EndPoint(In.Replace(self.location.href,"http://","https://")),!0)}catch(n){return!1}},p.EndPoint=function(){return s.$cctor(),s.EndPoint},p.set_EndPoint=function(n){s.$cctor(),s.EndPoint=n},s.$cctor=function(){s.$cctor=f.ignore,s.EndPoint="?",s.AjaxProvider=new a.New},(y=d.SingleNode=Mn.Class({ReplaceInDom:function(n){this.node.parentNode.replaceChild(this.node,n)}},u,y)).New=Mn.Ctor(function(n){u.New.call(this),this.node=n},y),$.SingleNode=function(n){return new y.New(n)},g.Activate=function(){var t;self.document&&(t=self.document.getElementById("websharper-data"))&&g.onReady(function(){var n;n=l.Activate(Rn.parse(t.getAttribute("content"))),g.set_Instances(n),n=e.GetFields(n),M.iter(function(n){var t;t=n[0],"object"==typeof(n=n[1])&&"$init"in n&&n.$preinit(t)},n),M.iter(function(n){var t;t=n[0],"object"==typeof(n=n[1])&&"Body"in n?n.Body().ReplaceInDom(self.document.getElementById(t)):"object"==typeof n&&"$init"in n&&n.$init(t)},n),M.iter(function(n){var t;t=n[0],"object"==typeof(n=n[1])&&"$init"in n&&n.$postinit(t)},n)})},g.onReady=function(n){var t;function e(){t||(t=!0,n(),self.document.removeEventListener("DOMContentLoaded",e,!1),self.removeEventListener("load",e,!1))}t=!1,"complete"===self.document.readyState?e():(self.document.addEventListener("DOMContentLoaded",e,!1),self.addEventListener("load",e,!1))},g.Instances=function(){return m.$cctor(),m.Instances},g.set_Instances=function(n){m.$cctor(),m.Instances=n},g.META_ID=function(){return m.$cctor(),m.META_ID},m.$cctor=function(){m.$cctor=f.ignore,m.META_ID="websharper-data",m.Instances=null},(w=v.EqualityComparer=Mn.Class({CGetHashCode0:function(n){return this.GetHashCode$1(n)},CEquals0:function(n,t){return this.Equals$1(n,t)},CGetHashCode:function(n){return this.GetHashCode$1(n)},CEquals:function(n,t){return this.Equals$1(n,t)}},u,w)).New=Mn.Ctor(function(){u.New.call(this)},w),(N=C.EquatableEqualityComparer=Mn.Class({GetHashCode$1:function(n){return Gn.Hash(n)},Equals$1:function(n,t){return n.EEquals(t)}},w,N)).New=Mn.Ctor(function(){w.New.call(this)},N),(x=C.BaseEqualityComparer=Mn.Class({GetHashCode$1:function(n){return Gn.Hash(n)},Equals$1:function(n,t){return Gn.Equals(n,t)}},w,x)).New=Mn.Ctor(function(){w.New.call(this)},x),(E=v.Comparer=Mn.Class({Compare0:function(n,t){return this.Compare$1(n,t)},Compare:function(n,t){return this.Compare$1(n,t)}},u,E)).New=Mn.Ctor(function(){u.New.call(this)},E),(S=C.ComparableComparer=Mn.Class({Compare$1:function(n,t){return n.CompareTo(t)}},E,S)).New=Mn.Ctor(function(){E.New.call(this)},S),(k=C.BaseComparer=Mn.Class({Compare$1:function(n,t){return Gn.Compare(n,t)}},E,k)).New=Mn.Ctor(function(){E.New.call(this)},k),b.charRange=function(n,t){var e=n.charCodeAt(),t=1+t.charCodeAt()-e;return t<=0?[]:W.init(t,function(n){return Ln.fromCharCode(n+e)})},D.op=function(n,t,e){return null==n||null==t?null:e(n,t)},D.opL=function(n,t,e){return null==n?null:e(n,t)},D.opR=function(n,t,e){return null==t?null:e(n,t)},D.cmp=function(n,t,e){return null!=n&&null!=t&&e(n,t)},D.cmpE=function(n,t,e){return null==n?null==t:null!=t&&e(n,t)},D.cmpL=function(n,t,e){return null!=n&&e(n,t)},D.cmpR=function(n,t,e){return null!=t&&e(n,t)},D.conv=function(n,t){return null==n?null:t(n)},T.prettyPrint=function(n){var t;return null===n?"null":"string"==(t=typeof n)?'"'+n+'"':"object"==t?n instanceof f.Array?"[|"+In.concat("; ",M.map(T.prettyPrint,n))+"|]":"[object Object]"===(t=Ln(n))?"{"+In.concat("; ",M.map(function(n){return t=n[0],n=n[1],t+" = "+T.prettyPrint(n);var t},e.GetFields(n)))+"}":t:Ln(n)},T.printArray2D=function(e,r){return null===r?"null":"[["+In.concat("][",W.delay(function(){var n=r.length?r[0].length:0;return W.map(function(t){return In.concat("; ",W.delay(function(){return W.map(function(n){return e(M.get2D(r,t,n))},b.range(0,n-1))}))},b.range(0,r.length-1))}))+"]]"},T.printArray=function(n,t){return null===t?"null":"[|"+In.concat("; ",M.map(n,t))+"|]"},T.printList=function(n,t){return"["+In.concat("; ",W.map(n,t))+"]"},T.padNumLeft=function(n,t){var e=M.get(n,0);return" "===e||"+"===e||"-"===e?e+In.PadLeftWith(n.substr(1),t-1,"0"):In.PadLeftWith(n,t,"0")},T.spaceForPos=function(n,t){return 0<=n?" "+t:t},T.plusForPos=function(n,t){return 0<=n?"+"+t:t},T.toSafe=function(n){return null==n?"":n},I.New=function(n,t){return{c:n,r:t}},P.New=function(n,t){return{k:n,ct:t}},(F=A.Scheduler=Mn.Class({tick:function(){for(var n=this,t=jn.now(),e=!0;e;)0===this.robin.length?e=!(this.idle=!0):(this.robin.shift()(),40<jn.now()-t&&(f.setTimeout(function(){n.tick()},0),e=!1))},Fork:function(n){var t=this;this.robin.push(n),this.idle&&(this.idle=!1,f.setTimeout(function(){t.tick()},0))}},u,F)).New=Mn.Ctor(function(){u.New.call(this),this.idle=!0,this.robin=[]},F),A.For=function(n,t){return A.Using(G.Get(n),function(n){return A.While(function(){return n.MoveNext()},A.Delay(function(){return t(n.Current())}))})},A.While=function(n,t){return n()?A.Bind(t,function(){return A.While(n,t)}):A.Return()},A.Using=function(n,t){return A.TryFinally(t(n),function(){n.Dispose()})},A.TryCancelled=function(n,e){return function(t){n(P.New(function(n){2==n.$&&e(n.$0),t.k(n)},t.ct))}},A.OnCancel=function(t){return function(n){n.k({$:0,$0:A.Register(n.ct,t)})}},A.StartChildAsTask=function(n){return function(t){A.StartChild(n,null)(P.New(function(n){0==n.$&&t.k({$:0,$0:A.StartImmediateAsTask(n.$0,{$:1,$0:t.ct})})},t.ct))}},A.StartChild=function(i,u){return function(n){var e=[!0],r=[null],o=[],t=null!=u&&1==u.$?{$:1,$0:f.setTimeout(function(){var n;for(e[0]=!1,n={$:1,$0:new cn.New};0<o.length;)o.shift()(n)},u.$0)}:null;A.scheduler().Fork(function(){n.ct.c||i(P.New(function(n){if(e[0])for(r[0]={$:1,$0:n},null!=t&&1==t.$&&f.clearTimeout(t.$0);0<o.length;)o.shift()(n)},n.ct))}),n.k({$:0,$0:function(n){var t;e[0]?null==(t=r[0])?o.push(n.k):n.k(t.$0):n.k({$:1,$0:new cn.New})}})}},A.Sequential=function(n){var t=M.ofSeq(n);return 0===M.length(t)?A.Return([]):function(r){var o,i;function u(n){n=function(e){return function(){M.get(t,e)(P.New(function(n){return t=e,0==(n=n).$?(M.set(i,t,n.$0),t===o-1?r.k({$:0,$0:i}):r.ct.c?A.cancel(r):u(t+1)):r.k(n);var t},r.ct))}}(n);return A.scheduler().Fork(n)}o=t.length,i=new f.Array(o),u(0)}},A.ParallelWithMaxDegree=function(n,l){var e;return l<=0&&b.InvalidArg("maxDegreeOfParallelism","maxDegreeOfParallelism must be positive, was "+Ln(l)),e=M.ofSeq(n),0===M.length(e)?A.Return([]):function(i){var u,a,c,n,t;function s(t){A.scheduler().Fork(function(){M.get(e,t)(P.New(function(n){return function(n,t){var e,r,o;switch(0===(r=a[0])?0:1===r?0==t.$?1:(e=[r,t],3):0==t.$?2:(e=[r,t],3)){case 0:return null;case 1:return M.set(c,n,t.$0),a[0]=0,i.k({$:0,$0:c});case 2:return i.ct.c?(a[0]=0,A.cancel(i)):(M.set(c,n,t.$0),a[0]=r-1,(o=u-r+l)<u?s(o):null);case 3:return a[0]=0,i.k(e[1])}}(t,n)},i.ct))})}for(u=e.length,a=[u],c=new f.Array(u),n=0,t=(-1===Gn.Compare(l,u)?l:u)-1;n<=t;n++)s(n)}},A.Parallel=function(n){var r=M.ofSeq(n);return 0===M.length(r)?A.Return([]):function(o){var n,i,u,t,e;for(n=r.length,i=[n],u=new f.Array(n),t=0,e=n-1;t<=e;t++)!function(t){A.scheduler().Fork(function(){M.get(r,t)(P.New(function(n){return function(n,t){var e,r=i[0];switch(0===r?0:1===r?0==t.$?1:(e=t,3):0==t.$?2:(e=t,3)){case 0:return null;case 1:return M.set(u,n,t.$0),i[0]=0,o.k({$:0,$0:u});case 2:return M.set(u,n,t.$0),void(i[0]=r-1);case 3:return i[0]=0,o.k(e)}}(t,n)},o.ct))})}(t)}},A.Sleep=function(r){return function(n){var t,e=void 0;t=f.setTimeout(function(){e.Dispose(),A.scheduler().Fork(function(){n.k({$:0,$0:null})})},r),e=A.Register(n.ct,function(){f.clearTimeout(t),A.scheduler().Fork(function(){A.cancel(n)})})}},A.StartImmediateAsTask=function(n,t){var e=new qn.New;return A.StartWithContinuations(n,function(n){e.SetResult(n)},function(n){e.SetException$1(n)},function(){e.SetCanceled()},t),e.get_Task()},A.StartAsTask=function(n,t){var e=new qn.New;return A.scheduler().Fork(function(){A.StartWithContinuations(n,function(n){e.SetResult(n)},function(n){e.SetException$1(n)},function(){e.SetCanceled()},t)}),e.get_Task()},A.AwaitTask1=function(n){return A.FromContinuations(function(t,e,r){0===n.get_Status()&&n.Start(),n.ContinueWith$1(function(n){return n.get_IsCanceled()?r(new tn.New(A.noneCT())):n.get_IsFaulted()?e(n.get_Exception()):t(n.get_Result())},A.noneCT())})},A.AwaitTask=function(n){return A.FromContinuations(function(t,e,r){0===n.get_Status()&&n.Start(),n.ContinueWith$1(function(n){return n.get_IsCanceled()?r(new tn.New(A.noneCT())):n.get_IsFaulted()?e(n.get_Exception()):t()},A.noneCT())})},A.AwaitEvent=function(n,o){return function(t){var e=void 0,r=void 0;e=n.Subscribe(V.observer(function(n){e.Dispose(),r.Dispose(),A.scheduler().Fork(function(){t.k({$:0,$0:n})})})),r=A.Register(t.ct,function(){null!=o&&1==o.$?o.$0():(e.Dispose(),A.scheduler().Fork(function(){A.cancel(t)}))})}},A.StartImmediate=function(n,t){var e=A.defCTS()[0],t=null==t?e:t.$0;t.c||n(P.New(function(n){1==n.$&&A.UncaughtAsyncError(n.$0)},t))},A.Start=function(n,t){var e=A.defCTS()[0],r=null==t?e:t.$0;A.scheduler().Fork(function(){r.c||n(P.New(function(n){1==n.$&&A.UncaughtAsyncError(n.$0)},r))})},A.UncaughtAsyncError=function(n){_n.log("WebSharper: Uncaught asynchronous exception",n)},A.StartWithContinuations=function(n,t,e,r,o){var i=A.defCTS()[0],o=null==o?i:o.$0;o.c||n(P.New(function(n){(1==n.$?e:2==n.$?r:t)(n.$0)},o))},A.FromContinuations=function(n){return function(t){var e;function r(n){e[0]?b.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times"):(e[0]=!0,A.scheduler().Fork(n))}e=[!1],n(function(n){r(function(){t.k({$:0,$0:n})})},function(n){r(function(){t.k({$:1,$0:n})})},function(n){r(function(){t.k({$:2,$0:n})})})}},A.GetCT=function(){return q.$cctor(),q.GetCT},A.Catch=function(n){return function(t){try{n(P.New(function(n){0==n.$?t.k({$:0,$0:{$:0,$0:n.$0}}):1==n.$?t.k({$:0,$0:{$:1,$0:n.$0}}):t.k(n)},t.ct))}catch(n){t.k({$:0,$0:{$:1,$0:n}})}}},A.TryWith=function(n,r){return function(e){n(P.New(function(t){if(0==t.$)e.k({$:0,$0:t.$0});else if(1==t.$)try{r(t.$0)(e)}catch(n){e.k(t)}else e.k(t)},e.ct))}},A.TryFinally=function(n,e){return function(t){n(P.New(function(n){try{e(),t.k(n)}catch(n){t.k({$:1,$0:n})}},t.ct))}},A.Delay=function(n){return function(t){try{n(null)(t)}catch(n){t.k({$:1,$0:n})}}},A.Combine=function(n,t){return A.Bind(n,function(){return t})},A.Bind=function(n,r){return A.checkCancel(function(e){n(P.New(function(n){var t;0==n.$?(t=n.$0,A.scheduler().Fork(function(){try{r(t)(e)}catch(n){e.k({$:1,$0:n})}})):A.scheduler().Fork(function(){e.k(n)})},e.ct))})},A.Zero=function(){return q.$cctor(),q.Zero},A.Return=function(t){return function(n){n.k({$:0,$0:t})}},A.checkCancel=function(t){return function(n){n.ct.c?A.cancel(n):t(n)}},A.cancel=function(n){n.k({$:2,$0:new tn.New(n.ct)})},A.defCTS=function(){return q.$cctor(),q.defCTS},A.scheduler=function(){return q.$cctor(),q.scheduler},A.Register=function(n,t){var e;return n===A.noneCT()?{Dispose:function(){return null}}:(e=n.r.push(t)-1,{Dispose:function(){return M.set(n.r,e,f.ignore)}})},A.noneCT=function(){return q.$cctor(),q.noneCT},q.$cctor=function(){q.$cctor=f.ignore,q.noneCT=I.New(!1,[]),q.scheduler=new F.New,q.defCTS=[new j.New],q.Zero=A.Return(),q.GetCT=function(n){n.k({$:0,$0:n.ct})}},(O=G.T=Mn.Class({Dispose:function(){this.d&&this.d(this)},Current:function(){return this.c},Current0:function(){return this.c},MoveNext:function(){return this.n(this)}},u,O)).New=Mn.Ctor(function(n,t,e,r){u.New.call(this),this.s=n,this.c=t,this.n=e,this.d=r},O),G.Get0=function(n){return n instanceof f.Array?G.ArrayEnumerator(n):Gn.Equals(typeof n,"string")?G.StringEnumerator(n):"GetEnumerator0"in n?n.GetEnumerator0():n.GetEnumerator()},G.Get=function(n){return n instanceof f.Array?G.ArrayEnumerator(n):Gn.Equals(typeof n,"string")?G.StringEnumerator(n):n.GetEnumerator()},G.StringEnumerator=function(e){return new O.New(0,null,function(n){var t=n.s;return t<e.length&&(n.c=e[t],n.s=t+1,!0)},void 0)},G.ArrayEnumerator=function(e){return new O.New(0,null,function(n){var t=n.s;return t<M.length(e)&&(n.c=M.get(e,t),n.s=t+1,!0)},void 0)},B.Undefined={$:0},M.splitInto=function(n,t){var e,r,o,i,u,a,c,s;if(n<=0&&b.FailWith("Count must be positive"),0===(r=M.length(t)))return[];for(n=-1===Gn.Compare(n,r)?n:r,o=M.create(n,null),i=r/n>>0,u=e=0,a=r%n-1;u<=a;u++)o[u]=M.sub(t,e,1+i),e=e+i+1;for(c=r%n,s=n-1;c<=s;c++)o[c]=M.sub(t,e,i),e+=i;return o},M.contains=function(n,t){for(var e=!0,r=0,o=M.length(t);e&&r<o;)Gn.Equals(t[r],n)?e=!1:r+=1;return!e},M.tryFindBack=function(n,t){for(var e,r=null,o=t.length-1;0<=o&&null==r;)n(e=t[o])&&(r={$:1,$0:e}),o-=1;return r},M.tryFindIndexBack=function(n,t){for(var e=null,r=t.length-1;0<=r&&null==e;)n(M.get(t,r))&&(e={$:1,$0:r}),r-=1;return e},M.mapFold=function(n,t,e){for(var r,o=new f.Array(e.length),i=t,u=0,a=e.length-1;u<=a;u++)r=n(i,e[u]),o[u]=r[0],i=r[1];return[o,i]},M.mapFoldBack=function(n,t,e){for(var r,o,i=new f.Array(t.length),u=e,a=t.length,c=1,s=a;c<=s;c++)o=n(t[r=a-c],u),i[r]=o[0],u=o[1];return[i,u]},M.mapInPlace=function(n,t){for(var e=0,r=t.length-1;e<=r;e++)t[e]=n(t[e])},M.mapiInPlace=function(n,t){for(var e=0,r=t.length-1;e<=r;e++)t[e]=n(e,t[e]);return t},M.sortInPlaceByDescending=function(e,n){M.mapInPlace(function(n){return n[0]},M.mapiInPlace(function(n,t){return[t,[e(t),n]]},n).sort(function(n,t){return-Gn.Compare(n[1],t[1])}))},W.tryHead=function(n){n=G.Get(n);try{return n.MoveNext()?{$:1,$0:n.Current()}:null}finally{"object"==typeof n&&"Dispose"in n&&n.Dispose()}},W.tryItem=function(n,t){var e,r,o;if(n<0)return null;e=0,r=G.Get(t);try{for(o=!0;o&&e<=n;)r.MoveNext()?e+=1:o=!1;return o?{$:1,$0:r.Current()}:null}finally{"object"==typeof r&&"Dispose"in r&&r.Dispose()}},W.tryLast=function(n){var t,e=G.Get(n);try{if(e.MoveNext()){for(;e.MoveNext(););t={$:1,$0:e.Current()}}else t=null;return t}finally{"object"==typeof e&&"Dispose"in e&&e.Dispose()}},W.chunkBySize=function(r,n){return r<=0&&b.FailWith("Chunk size must be positive"),{GetEnumerator:function(){var e=G.Get(n);return new O.New(!0,null,function(n){var t;if(n.s&&e.MoveNext()){for(t=[e.Current()];n.s&&M.length(t)<r;)e.MoveNext()?t.push(e.Current()):n.s=!1;return n.c=t,!0}return!1},function(){e.Dispose()})}}},M.countBy=function(n,t){for(var e,r=new Y.New$5,o=[],i=0,u=M.length(t)-1;i<=u;i++)e=n(t[i]),r.ContainsKey(e)?r.set_Item(e,r.get_Item(e)+1):(o.push(e),r.Add(e,1));return M.mapInPlace(function(n){return[n,r.get_Item(n)]},o),o},W.except=function(n,t){return{GetEnumerator:function(){var r=G.Get(t),o=new $n.New$2(n);return new O.New(null,null,function(n){var t,e;if(r.MoveNext()){for(t=r.Current(),e=o.Add(t);!e&&r.MoveNext();)t=r.Current(),e=o.Add(t);return e&&(n.c=t,!0)}return!1},function(){r.Dispose()})}}},R.skip=function(n,t){for(var e=t,r=1,o=n;r<=o;r++)0==e.$?b.FailWith("Input list too short."):e=e.$1;return e},M.groupBy=function(n,t){for(var e,r,o=new Y.New$5,i=[],u=0,a=M.length(t)-1;u<=a;u++)r=n(e=t[u]),o.ContainsKey(r)?o.get_Item(r).push(e):(i.push(r),o.Add(r,[e]));return M.mapInPlace(function(n){return[n,o.get_Item(n)]},i),i},W.insufficient=function(){return b.FailWith("The input sequence has an insufficient number of elements.")},W.last=function(n){var t,e=G.Get(n);try{if(e.MoveNext()){for(;e.MoveNext(););t=e.Current()}else t=W.insufficient();return t}finally{"object"==typeof e&&"Dispose"in e&&e.Dispose()}},W.contains=function(n,t){var e,r=G.Get(t);try{for(e=!1;!e&&r.MoveNext();)e=Gn.Equals(r.Current(),n);return e}finally{"object"==typeof r&&"Dispose"in r&&r.Dispose()}},R.skipWhile=function(n,t){for(var e=t;0!=e.$&&n(R.head(e));)e=R.tail(e);return e},W.nonNegative=function(){return b.FailWith("The input must be non-negative.")},M.transposeArray=function(n){var t,e,r,o,i,u,a,c,s=M.length(n);if(0===s)return[];for(t=M.length(M.get(n,0)),r=s-(e=1);e<=r;e++)t!==M.length(M.get(n,e))&&b.FailWith("The arrays have different lengths.");for(o=new f.Array(t),i=0,u=t-1;i<=u;i++)for(o[i]=new f.Array(s),a=0,c=s-1;a<=c;a++)o[i][a]=M.get(M.get(n,a),i);return o},M.checkBounds=function(n,t){(t<0||t>=n.length)&&b.FailWith("Index was outside the bounds of the array.")},M.checkBounds2D=function(n,t,e){if(t<0||e<0||t>=n.length||e>=(n.length?n[0].length:0))throw new nn.New},M.checkRange=function(n,t,e){(e<0||t<0||n.length<t+e)&&b.FailWith("Index was outside the bounds of the array.")},M.set=function(n,t,e){M.checkBounds(n,t),n[t]=e},M.get=function(n,t){return M.checkBounds(n,t),n[t]},M.sub=function(n,t,e){return M.checkRange(n,t,e),n.slice(t,t+e)},M.setSub=function(n,t,e,r){for(var o=0,i=e-1;o<=i;o++)M.set(n,t+o,M.get(r,o))},M.get2D=function(n,t,e){return M.checkBounds2D(n,t,e),n[t][e]},M.set2D=function(n,t,e,r){M.checkBounds2D(n,t,e),n[t][e]=r},M.zeroCreate2D=function(n,t){n=M.init(n,function(){return M.create(t,null)});return n.dims=2,n},M.sub2D=function(n,t,e,r,o){for(var i,u,r=r<0?0:r,a=o<0?0:o,c=M.zeroCreate2D(r,a),s=0,l=r-1;s<=l;s++)for(i=0,u=a-1;i<=u;i++)M.set2D(c,s,i,M.get2D(n,t+s,e+i));return c},M.setSub2D=function(n,t,e,r,o,i){for(var u,a,c=0,s=r-1;c<=s;c++)for(u=0,a=o-1;u<=a;u++)M.set2D(n,t+c,e+u,M.get2D(i,c,u))},M.length=function(n){return 2===n.dims?n.length*n.length:n.length},n.checkThis=function(n){return Gn.Equals(n,null)?b.InvalidOp("The initialization of an object or value resulted in an object or value being accessed recursively before it was fully initialized."):n},M.binarySearch=function(n,t,e,r){var o,i,u=e,a=r-1;if(e<0)throw new rn.New("index","Non-negative number required.");if(r>M.length(n))throw new en.New$2("Offset and length were out of bounds for the array or count is greater than the number of elements from index to the end of the source collection.");if(r<e)throw new rn.New("length","Non-negative number required.");for(;;){if(a<u)return~u;if(i=t(M.get(n,o=(u+a)/2>>0)),u===a)return 0===i?u:0<i?~(u+1):~u;i<=0?a=o:u=1+o}},M.binarySearchComparer=function(t){return t.CompareTo0?function(n){return t.CompareTo0(n)}:function(n){if(n.CompareTo0)return-n.CompareTo0(t);throw new un.New$2("Failed to compare two elements in the array.",new en.New$2("At least one object must implement IComparable."))}},M.sortInternal=function(u,n,t,a,c){!function n(t,e){return t<e?(n(t,(t=function(n,t){for(var e=u[t],r=n-1,o=n,i=t-1;o<=i;o++)a(u[o],e)<0&&c(r+=1,o);return a(u[t],u[r+1])<0&&c(r+1,t),r+1}(t,e))-1),n(t+1,e)):null}(n,n+t-1)},M.sortSub=function(r,n,t,e){M.sortInternal(r,n,t,e,function(n,t){var e=r[n];r[n]=r[t],r[t]=e})},M.sortByKeys=function(r,o,n,t,e){M.sortInternal(r,n,t,e,function(n,t){var e=r[n];r[n]=r[t],r[t]=e,e=o[n],o[n]=o[t],o[t]=e})},M.clear=function(n,t,e){var r,o;if(null==n)throw new on.New$1("array");if(t<0||e<0||t+e>M.length(n))throw new nn.New;for(o=(r=t)+e-1;r<=o;r++)n[r]="number"==typeof n[r]?0:null},M.constrainedCopy=function(t,e,n,r,o){t===n&&r<=e+o?M.blit(M.init(o,function(n){return M.get(t,e+n)}),0,n,r,o):M.blit(t,e,n,r,o)},M.findIndexBound=function(n,t,e,r){var o=t+e,i=t;if(null==n)throw new on.New$1("array");if(null==r)throw new on.New$1("match");if(t<0)throw new rn.New("startIndex","Index was out of range. Must be non-negative and less than the size of the collection.");if(e<0||t+e>M.length(n))throw new rn.New("count","Count must be positive and count must refer to a location within the string/array/collection.");for(;;){if(i===o)return-1;if(r(M.get(n,i)))return i;i+=1}},M.findLastIndexBound=function(n,t,e,r){var o=t+e-1;if(null==n)throw new on.New$1("array");if(null==r)throw new on.New$1("match");if(t<0)throw new rn.New("startIndex","Index was out of range. Must be non-negative and less than the size of the collection.");if(e<0||t+e>M.length(n))throw new rn.New("count","Count must be positive and count must refer to a location within the string/array/collection.");for(;;){if(o<t)return-1;if(r(M.get(n,o)))return o;o-=1}},M.reverse=function(n,t,e){e=M.sub(n,t,e).slice().reverse();M.blit(e,0,n,t,M.length(e))},M.sum=function(n){for(var t=0,e=0;e<n.length;e++)t+=n[e];return t},M.sumBy=function(n,t){for(var e=0,r=0;r<t.length;r++)e+=n(t[r]);return e},M.allPairs=function(n,t){for(var e,r,o=n.length,i=t.length,u=new f.Array(o*i),a=0,c=o-1;a<=c;a++)for(e=0,r=i-1;e<=r;e++)u[a*i+e]=[n[a],t[e]];return u},M.average=function(n){return f.Number(M.sum(n))/n.length},M.averageBy=function(n,t){return f.Number(M.sumBy(n,t))/t.length},M.blit=function(n,t,e,r,o){var i,u;for(M.checkRange(n,t,o),M.checkRange(e,r,o),i=0,u=o-1;i<=u;i++)e[r+i]=n[t+i]},M.choose=function(n,t){for(var e,r=[],o=0,i=t.length-1;o<=i;o++)null!=(e=n(t[o]))&&r.push(e.$0);return r},M.collect=function(n,t){return f.Array.prototype.concat.apply([],M.map(n,t))},M.concat=function(n){return f.Array.prototype.concat.apply([],M.ofSeq(n))},M.create=function(n,t){for(var e=new f.Array(n),r=0,o=n-1;r<=o;r++)e[r]=t;return e},M.exists=function(n,t){for(var e=!1,r=0,o=M.length(t);!e&&r<o;)n(t[r])?e=!0:r+=1;return e},M.exists2=function(n,t,e){var r,o,i;for(M.checkLength(t,e),r=!1,o=0,i=M.length(t);!r&&o<i;)n(t[o],e[o])?r=!0:o+=1;return r},M.fill=function(n,t,e,r){var o,i;for(M.checkRange(n,t,e),i=(o=t)+e-1;o<=i;o++)n[o]=r},M.filter=function(n,t){for(var e=[],r=0,o=t.length-1;r<=o;r++)n(t[r])&&e.push(t[r]);return e},M.find=function(n,t){t=M.tryFind(n,t);return null==t?b.FailWith("KeyNotFoundException"):t.$0},M.findIndex=function(n,t){t=M.tryFindIndex(n,t);return null==t?b.FailWith("KeyNotFoundException"):t.$0},M.fold=function(n,t,e){for(var r=t,o=0,i=e.length-1;o<=i;o++)r=n(r,e[o]);return r},M.fold2=function(n,t,e,r){var o,i,u;for(M.checkLength(e,r),o=t,i=0,u=e.length-1;i<=u;i++)o=n(o,e[i],r[i]);return o},M.foldBack=function(n,t,e){for(var r=e,o=t.length,i=1,u=o;i<=u;i++)r=n(t[o-i],r);return r},M.foldBack2=function(n,t,e,r){var o,i,u,a;for(M.checkLength(t,e),o=r,u=1,a=i=t.length;u<=a;u++)o=n(t[i-u],e[i-u],o);return o},M.forall=function(n,t){for(var e=!0,r=0,o=M.length(t);e&&r<o;)n(t[r])?r+=1:e=!1;return e},M.forall2=function(n,t,e){var r,o,i;for(M.checkLength(t,e),r=!0,o=0,i=M.length(t);r&&o<i;)n(t[o],e[o])?o+=1:r=!1;return r},M.init=function(n,t){var e,r,o;for(n<0&&b.FailWith("Negative size given."),e=new f.Array(n),r=0,o=n-1;r<=o;r++)e[r]=t(r);return e},M.iter=function(n,t){for(var e=0,r=t.length-1;e<=r;e++)n(t[e])},M.iter2=function(n,t,e){var r,o;for(M.checkLength(t,e),r=0,o=t.length-1;r<=o;r++)n(t[r],e[r])},M.iteri=function(n,t){for(var e=0,r=t.length-1;e<=r;e++)n(e,t[e])},M.iteri2=function(n,t,e){var r,o;for(M.checkLength(t,e),r=0,o=t.length-1;r<=o;r++)n(r,t[r],e[r])},M.map=function(n,t){for(var e=new f.Array(t.length),r=0,o=t.length-1;r<=o;r++)e[r]=n(t[r]);return e},M.map2=function(n,t,e){var r,o,i;for(M.checkLength(t,e),r=new f.Array(e.length),o=0,i=e.length-1;o<=i;o++)r[o]=n(t[o],e[o]);return r},M.mapi=function(n,t){for(var e=new f.Array(t.length),r=0,o=t.length-1;r<=o;r++)e[r]=n(r,t[r]);return e},M.mapi2=function(n,t,e){var r,o,i;for(M.checkLength(t,e),r=new f.Array(t.length),o=0,i=t.length-1;o<=i;o++)r[o]=n(o,t[o],e[o]);return r},M.max=function(n){var t,e,r,o;for(M.nonEmpty(n),t=n[0],r=n.length-(e=1);e<=r;e++)o=n[e],1===Gn.Compare(o,t)&&(t=o);return t},M.maxBy=function(n,t){var e,r,o,i,u,a;for(M.nonEmpty(t),r=n(e=t[0]),i=t.length-(o=1);o<=i;o++)a=n(u=t[o]),1===Gn.Compare(a,r)&&(e=u,r=a);return e},M.min=function(n){var t,e,r,o;for(M.nonEmpty(n),t=n[0],r=n.length-(e=1);e<=r;e++)o=n[e],-1===Gn.Compare(o,t)&&(t=o);return t},M.minBy=function(n,t){var e,r,o,i,u,a;for(M.nonEmpty(t),r=n(e=t[0]),i=t.length-(o=1);o<=i;o++)a=n(u=t[o]),-1===Gn.Compare(a,r)&&(e=u,r=a);return e},M.ofList=function(n){for(var t=[],e=n;0!=e.$;)t.push(R.head(e)),e=R.tail(e);return t},M.ofSeq=function(n){var t,e;if(n instanceof f.Array)return n.slice();if(n instanceof Nn)return M.ofList(n);t=[],e=G.Get(n);try{for(;e.MoveNext();)t.push(e.Current());return t}finally{"object"==typeof e&&"Dispose"in e&&e.Dispose()}},M.partition=function(n,t){for(var e=[],r=[],o=0,i=t.length-1;o<=i;o++)(n(t[o])?e:r).push(t[o]);return[e,r]},M.permute=function(n,t){for(var e=new f.Array(t.length),r=0,o=t.length-1;r<=o;r++)e[n(r)]=t[r];return e},M.pick=function(n,t){t=M.tryPick(n,t);return null==t?b.FailWith("KeyNotFoundException"):t.$0},M.reduce=function(n,t){var e,r,o;for(M.nonEmpty(t),e=t[0],o=t.length-(r=1);r<=o;r++)e=n(e,t[r]);return e},M.reduceBack=function(n,t){var e,r,o,i;for(M.nonEmpty(t),e=t[(r=t.length)-1],o=2,i=r;o<=i;o++)e=n(t[r-o],e);return e},M.scan=function(n,t,e){var r,o,i=new f.Array(1+e.length);for(i[0]=t,r=0,o=e.length-1;r<=o;r++)i[r+1]=n(i[r],e[r]);return i},M.scanBack=function(n,t,e){var r,o,i=t.length,u=new f.Array(1+i);for(u[i]=e,r=0,o=i-1;r<=o;r++)u[i-r-1]=n(t[i-r-1],u[i-r]);return u},M.sort=function(n){return M.map(function(n){return n[0]},M.mapi(function(n,t){return[t,n]},n).sort(Gn.Compare))},M.sortBy=function(e,n){return M.map(function(n){return n[0]},M.mapi(function(n,t){return[t,[e(t),n]]},n).sort(function(n,t){return Gn.Compare(n[1],t[1])}))},M.sortInPlace=function(n){M.mapInPlace(function(n){return n[0]},M.mapiInPlace(function(n,t){return[t,n]},n).sort(Gn.Compare))},M.sortInPlaceBy=function(e,n){M.mapInPlace(function(n){return n[0]},M.mapiInPlace(function(n,t){return[t,[e(t),n]]},n).sort(function(n,t){return Gn.Compare(n[1],t[1])}))},M.sortInPlaceWith=function(n,t){t.sort(n)},M.sortWith=function(n,t){return t.slice().sort(n)},M.sortByDescending=function(e,n){return M.map(function(n){return n[0]},M.mapi(function(n,t){return[t,[e(t),n]]},n).sort(function(n,t){return-Gn.Compare(n[1],t[1])}))},M.sortDescending=function(n){return M.map(function(n){return n[0]},M.mapi(function(n,t){return[t,n]},n).sort(function(n,t){return-Gn.Compare(n,t)}))},M.transpose=function(n){return n instanceof f.Array?M.transposeArray(n):M.transposeArray(M.ofSeq(n))},M.tryFind=function(n,t){for(var e=null,r=0;r<t.length&&null==e;)n(t[r])&&(e={$:1,$0:t[r]}),r+=1;return e},M.tryFindIndex=function(n,t){for(var e=null,r=0;r<t.length&&null==e;)n(t[r])&&(e={$:1,$0:r}),r+=1;return e},M.tryHead=function(n){return 0===n.length?null:{$:1,$0:n[0]}},M.tryItem=function(n,t){return t.length<=n||n<0?null:{$:1,$0:t[n]}},M.tryLast=function(n){var t=n.length;return 0===t?null:{$:1,$0:n[t-1]}},M.tryPick=function(n,t){for(var e,r=null,o=0;o<t.length&&null==r;)null!=(e=n(t[o]))&&1==e.$&&(r=e),o+=1;return r},M.unzip=function(n){for(var t,e=[],r=[],o=0,i=n.length-1;o<=i;o++)t=n[o],e.push(t[0]),r.push(t[1]);return[e,r]},M.unzip3=function(n){for(var t,e=[],r=[],o=[],i=0,u=n.length-1;i<=u;i++)t=n[i],e.push(t[0]),r.push(t[1]),o.push(t[2]);return[e,r,o]},M.zip=function(n,t){var e,r,o;for(M.checkLength(n,t),e=M.create(n.length,null),r=0,o=n.length-1;r<=o;r++)e[r]=[n[r],t[r]];return e},M.zip3=function(n,t,e){var r,o,i;for(M.checkLength(n,t),M.checkLength(t,e),r=M.create(n.length,null),o=0,i=n.length-1;o<=i;o++)r[o]=[n[o],t[o],e[o]];return r},M.chunkBySize=function(n,t){return M.ofSeq(W.chunkBySize(n,t))},M.compareWith=function(n,t,e){return W.compareWith(n,t,e)},M.distinct=function(n){return M.ofSeq(W.distinct(n))},M.distinctBy=function(n,t){return M.ofSeq(W.distinctBy(n,t))},M.except=function(n,t){return M.ofSeq(W.except(n,t))},M.findBack=function(n,t){t=M.tryFindBack(n,t);return null==t?b.FailWith("KeyNotFoundException"):t.$0},M.findIndexBack=function(n,t){t=M.tryFindIndexBack(n,t);return null==t?b.FailWith("KeyNotFoundException"):t.$0},M.head=function(n){return M.nonEmpty(n),n[0]},M.last=function(n){return M.nonEmpty(n),n[n.length-1]},M.map3=function(n,t,e,r){var o,i,u;for(M.checkLength(t,e),M.checkLength(t,r),o=new f.Array(r.length),i=0,u=r.length-1;i<=u;i++)o[i]=n(t[i],e[i],r[i]);return o},M.pairwise=function(n){return M.ofSeq(W.pairwise(n))},M.replicate=function(n,t){return M.create(n,t)},M.indexed=function(n){return M.mapi(function(n,t){return[n,t]},n)},M.skip=function(n,t){return n<0?W.nonNegative():n>t.length?W.insufficient():t.slice(n)},M.skipWhile=function(n,t){for(var e=t.length,r=0;r<e&&n(t[r]);)r+=1;return t.slice(r)},M.tail=function(n){return M.skip(1,n)},M.take=function(n,t){return n<0?W.nonNegative():n>t.length?W.insufficient():t.slice(0,n)},M.takeWhile=function(n,t){for(var e=t.length,r=0;r<e&&n(t[r]);)r+=1;return t.slice(0,r)},M.exactlyOne=function(n){return 1===n.length?n[0]:b.FailWith("The input does not have precisely one element.")},M.tryExactlyOne=function(n){return 1===n.length?{$:1,$0:n[0]}:null},M.unfold=function(n,t){return M.ofSeq(W.unfold(n,t))},M.windowed=function(n,t){return M.ofSeq(W.windowed(n,t))},M.splitAt=function(n,t){return[M.take(n,t),M.skip(n,t)]},M.nonEmpty=function(n){0===n.length&&b.FailWith("The input array was empty.")},M.checkLength=function(n,t){n.length!==t.length&&b.FailWith("The arrays have different lengths.")},L.init=function(n,t,e){for(var r,o,i=M.zeroCreate2D(n,t),u=0,a=n-1;u<=a;u++)for(r=0,o=t-1;r<=o;r++)M.set2D(i,u,r,e(u,r));return i},L.iter=function(n,t){for(var e,r,o=t.length,i=t.length?t[0].length:0,u=0,a=o-1;u<=a;u++)for(e=0,r=i-1;e<=r;e++)n(M.get2D(t,u,e))},L.iteri=function(n,t){for(var e,r,o=t.length,i=t.length?t[0].length:0,u=0,a=o-1;u<=a;u++)for(e=0,r=i-1;e<=r;e++)n(u,e,M.get2D(t,u,e))},L.map=function(e,r){return L.init(r.length,r.length?r[0].length:0,function(n,t){return e(M.get2D(r,n,t))})},L.mapi=function(e,r){return L.init(r.length,r.length?r[0].length:0,function(n,t){return e(n,t,M.get2D(r,n,t))})},L.copy=function(e){return L.init(e.length,e.length?e[0].length:0,function(n,t){return M.get2D(e,n,t)})},(j=n.CancellationTokenSource=Mn.Class({CancelAfter:function(n){var t,e=this;this.c||(null!=(t=this.pending)&&f.clearTimeout(t.$0),this.pending={$:1,$0:f.setTimeout(function(){e.Cancel$1()},n)})},Cancel:function(n){n?this.c||(this.c=!0,M.iter(function(n){n()},this.r)):this.Cancel$1()},Cancel$1:function(){var n;if(!this.c&&(this.c=!0,n=M.choose(function(n){try{return n(),null}catch(n){return{$:1,$0:n}}},this.r),0<M.length(n)))throw new an.New$3(n)}},u,j)).CreateLinkedTokenSource=function(n,t){return j.CreateLinkedTokenSource$1([n,t])},j.CreateLinkedTokenSource$1=function(n){var t=new j.New;return M.iter(function(n){A.Register(n,function(){t.Cancel$1()})},n),t},j.New=Mn.Ctor(function(){u.New.call(this),this.c=!1,this.pending=null,this.r=[],this.init=1},j),_.IsWhiteSpace=function(n){return null!==n.match(new f.RegExp("\\s"))},_.Parse=function(n){return 1===n.length?n:b.FailWith("String must be exactly one character long.")},_.IsUpper=function(n){return"A"<=n&&n<="Z"},_.IsLower=function(n){return"a"<=n&&n<="z"},_.IsLetterOrDigit=function(n){return _.IsLetter(n)||_.IsDigit(n)},_.IsLetter=function(n){return"A"<=n&&n<="Z"||"a"<=n&&n<="z"},_.IsDigit=function(n){return"0"<=n&&n<="9"},_.IsControl=function(n){return"\0"<=n&&n<=""||""<=n&&n<=""},_.GetNumericValue=function(n){return"0"<=n&&n<="9"?n.charCodeAt()-"0".charCodeAt():-1},V.observer=function(n){return{OnCompleted:function(){return null},OnError:function(){return null},OnNext:n}},H.LongTime=function(n){return new jn(n).toLocaleTimeString({},{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})},H.ShortTime=function(n){return new jn(n).toLocaleTimeString({},{hour:"2-digit",minute:"2-digit",hour12:!1})},H.LongDate=function(n){return new jn(n).toLocaleDateString({},{year:"numeric",month:"long",day:"numeric",weekday:"long"})},H.Parse=function(n){n=H.TryParse(n);return null!=n&&1==n.$?n.$0:b.FailWith("Failed to parse date string.")},H.TryParse=function(n){n=jn.parse(n);return f.isNaN(n)?null:{$:1,$0:n}},H.AddMonths=function(n,t){n=new jn(n);return new jn(n.getFullYear(),n.getMonth()+t,n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()).getTime()},H.AddYears=function(n,t){n=new jn(n);return new jn(n.getFullYear()+t,n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()).getTime()},H.TimePortion=function(n){n=new jn(n);return 1e3*(60*(60*(0+n.getHours())+n.getMinutes())+n.getSeconds())+n.getMilliseconds()},H.DatePortion=function(n){n=new jn(n);return new jn(n.getFullYear(),n.getMonth(),n.getDate()).getTime()},K.get_Now=function(){var n=new jn;return{d:n.getTime(),o:-n.getTimezoneOffset()}},K.get_DateTime=function(n){return n.d},z.InvocationList=function(n){return n.$Invokes||[n]},z.RemoveAll=function(n,t){n=z.InvocationList(n);return 1<M.length(z.InvocationList(t))&&b.FailWith("TODO: Remove multicast delegates"),Mn.CreateDelegate(M.filter(function(n){return!Gn.Equals(n,t)},n))},z.Remove=function(n,t){var e,r,o,i,u=z.InvocationList(n);for(1<M.length(z.InvocationList(t))&&b.FailWith("TODO: Remove multicast delegates"),e=!(r=[]),o=M.length(u)-1,0;0<=o;o--)i=M.get(u,o),!e&&Mn.DelegateEqual(i,t)?e=!0:r.unshift(i);return Mn.CreateDelegate(r)},z.DelegateTarget=function(n){return n?"$Target"in n?n.$Target:"$Invokes"in n?(n=n.$Invokes,M.get(n,M.length(n)-1)[1]):null:null},U.getHashCode=function(n,t){return n.CGetHashCode(t)},U.equals=function(e){return function(n,t){return e.CEquals(n,t)}},U.alreadyAdded=function(){return b.FailWith("An item with the same key has already been added.")},U.notPresent=function(){return b.FailWith("The given key was not present in the dictionary.")},(J=v.KeyCollection=Mn.Class({GetEnumerator$1:function(){return G.Get(W.map(function(n){return n.K},this.d))},get_Count:function(){return this.d.count},GetEnumerator0:function(){return this.GetEnumerator$1()},GetEnumerator:function(){return this.GetEnumerator$1()}},u,J)).New=Mn.Ctor(function(n){u.New.call(this),this.d=n},J),(X=v.ValueCollection=Mn.Class({GetEnumerator$1:function(){return G.Get(W.map(function(n){return n.V},this.d))},get_Count:function(){return this.d.count},GetEnumerator0:function(){return this.GetEnumerator$1()},GetEnumerator:function(){return this.GetEnumerator$1()}},u,X)).New=Mn.Ctor(function(n){u.New.call(this),this.d=n},X),(Y=v.Dictionary=Mn.Class({remove:function(t){var n,e=this,r=this.hash(t),o=this.data[r];return null!=o&&(n=M.filter(function(n){return!e.equals.apply(null,[b.KeyValue(n)[0],t])},o),M.length(n)<o.length&&(this.count=this.count-1,this.data[r]=n,!0))},add:function(t,n){var e=this,r=this.hash(t),o=this.data[r];null==o?(this.count=this.count+1,this.data[r]=new f.Array({K:t,V:n})):(M.exists(function(n){return e.equals.apply(null,[b.KeyValue(n)[0],t])},o)&&U.alreadyAdded(),this.count=this.count+1,o.push({K:t,V:n}))},set:function(t,n){var e=this,r=this.hash(t),o=this.data[r];null==o?(this.count=this.count+1,this.data[r]=new f.Array({K:t,V:n})):null==(r=M.tryFindIndex(function(n){return e.equals.apply(null,[b.KeyValue(n)[0],t])},o))?(this.count=this.count+1,o.push({K:t,V:n})):o[r.$0]={K:t,V:n}},get:function(t){var e=this,n=this.data[this.hash(t)];return null==n?U.notPresent():M.pick(function(n){n=b.KeyValue(n);return e.equals.apply(null,[n[0],t])?{$:1,$0:n[1]}:null},n)},get_Keys:function(){return new J.New(this)},get_Values:function(){return new X.New(this)},TryGetValue:function(t,n){var e=this,r=this.data[this.hash(t)];return null!=r&&(null!=(r=M.tryPick(function(n){n=b.KeyValue(n);return e.equals.apply(null,[n[0],t])?{$:1,$0:n[1]}:null},r))&&1==r.$&&(n.set(r.$0),!0))},Remove:function(n){return this.remove(n)},GetEnumerator$1:function(){return G.Get0(this)},set_Item:function(n,t){this.set(n,t)},get_Item:function(n){return this.get(n)},ContainsKey:function(t){var e=this,n=this.data[this.hash(t)];return null!=n&&M.exists(function(n){return e.equals.apply(null,[b.KeyValue(n)[0],t])},n)},Clear:function(){this.data=[],this.count=0},Add:function(n,t){this.add(n,t)},GetEnumerator:function(){return G.Get0(this)},GetEnumerator0:function(){return G.Get0(M.concat(e.GetFieldValues(this.data)))}},u,Y)).New=Mn.Ctor(function(n,t){Y.New$6.call(this,n,U.equals(t),function(n){return U.getHashCode(t,n)})},Y),Y.New$1=Mn.Ctor(function(n){Y.New$6.call(this,n,Gn.Equals,Gn.Hash)},Y),Y.New$2=Mn.Ctor(function(n,t){Y.New$3.call(this,t)},Y),Y.New$3=Mn.Ctor(function(t){Y.New$6.call(this,[],U.equals(t),function(n){return U.getHashCode(t,n)})},Y),Y.New$4=Mn.Ctor(function(n){Y.New$5.call(this)},Y),Y.New$5=Mn.Ctor(function(){Y.New$6.call(this,[],Gn.Equals,Gn.Hash)},Y),Y.New$6=Mn.Ctor(function(n,t,e){var r,o;u.New.call(this),this.equals=t,this.hash=e,this.count=0,this.data=[],r=G.Get(n);try{for(;r.MoveNext();)o=r.Current(),this.set(o.K,o.V)}finally{"object"==typeof r&&"Dispose"in r&&r.Dispose()}},Y),Z.withInner=function(n,t){n=new h(n);return n.inner=t,n},(Q=n.MatchFailureException=Mn.Class({},h,Q)).New=Mn.Ctor(function(n,t,e){this.message=n+" at "+Ln(t)+":"+Ln(e),f.Object.setPrototypeOf(this,Q.prototype)},Q),(nn=n.IndexOutOfRangeException=Mn.Class({},h,nn)).New=Mn.Ctor(function(){nn.New$1.call(this,"Index was outside the bounds of the array.")},nn),nn.New$1=Mn.Ctor(function(n){this.message=n,f.Object.setPrototypeOf(this,nn.prototype)},nn),(tn=n.OperationCanceledException=Mn.Class({},h,tn)).New=Mn.Ctor(function(n){tn.New$1.call(this,"The operation was canceled.",null,n)},tn),tn.New$1=Mn.Ctor(function(n,t,e){this.message=n,this.inner=t,f.Object.setPrototypeOf(this,tn.prototype),this.ct=e},tn),(en=n.ArgumentException=Mn.Class({},h,en)).New=Mn.Ctor(function(n,t){en.New$2.call(this,t+"\nParameter name: "+n)},en),en.New$1=Mn.Ctor(function(){en.New$2.call(this,"Value does not fall within the expected range.")},en),en.New$2=Mn.Ctor(function(n){this.message=n,f.Object.setPrototypeOf(this,en.prototype)},en),(rn=n.ArgumentOutOfRangeException=Mn.Class({},h,rn)).New=Mn.Ctor(function(n,t){this.message=t+"\nParameter name: "+n,f.Object.setPrototypeOf(this,rn.prototype)},rn),rn.New$1=Mn.Ctor(function(n){rn.New.call(this,n,"Specified argument was out of the range of valid values.")},rn),rn.New$2=Mn.Ctor(function(){this.message="Specified argument was out of the range of valid values.",f.Object.setPrototypeOf(this,rn.prototype)},rn),(on=n.ArgumentNullException=Mn.Class({},h,on)).New=Mn.Ctor(function(n,t){this.message=t+"\nParameter name: "+n,f.Object.setPrototypeOf(this,on.prototype)},on),on.New$1=Mn.Ctor(function(n){on.New.call(this,n,"Value cannot be null.")},on),on.New$2=Mn.Ctor(function(){this.message="Value cannot be null.",f.Object.setPrototypeOf(this,on.prototype)},on),(un=n.InvalidOperationException=Mn.Class({},h,un)).New=Mn.Ctor(function(n){un.New$2.call(this,n,null)},un),un.New$1=Mn.Ctor(function(){un.New.call(this,"Operation is not valid due to the current state of the object.")},un),un.New$2=Mn.Ctor(function(n,t){this.message=n,this.inner=t,f.Object.setPrototypeOf(this,un.prototype)},un),(an=n.AggregateException=Mn.Class({},h,an)).New=Mn.Ctor(function(n,t){an.New$4.call(this,n,[t])},an),an.New$1=Mn.Ctor(function(n,t){an.New$4.call(this,n,M.ofSeq(t))},an),an.New$2=Mn.Ctor(function(n){an.New$4.call(this,"One or more errors occurred.",M.ofSeq(n))},an),an.New$3=Mn.Ctor(function(n){an.New$4.call(this,"One or more errors occurred.",n)},an),an.New$4=Mn.Ctor(function(n,t){this.message=n,f.Object.setPrototypeOf(this,an.prototype),this.innerExceptions=t},an),(cn=n.TimeoutException=Mn.Class({},h,cn)).New=Mn.Ctor(function(){cn.New$1.call(this,"The operation has timed out.")},cn),cn.New$1=Mn.Ctor(function(n){this.message=n,f.Object.setPrototypeOf(this,cn.prototype)},cn),(sn=n.FormatException=Mn.Class({},h,sn)).New=Mn.Ctor(function(){sn.New$1.call(this,"One of the identified items was in an invalid format.")},sn),sn.New$1=Mn.Ctor(function(n){this.message=n,f.Object.setPrototypeOf(this,sn.prototype)},sn),(ln=n.OverflowException=Mn.Class({},h,ln)).New=Mn.Ctor(function(){ln.New$1.call(this,"Arithmetic operation resulted in an overflow.")},ln),ln.New$1=Mn.Ctor(function(n){this.message=n,f.Object.setPrototypeOf(this,ln.prototype)},ln),(fn=n.TaskCanceledException=Mn.Class({},h,fn)).New=Mn.Ctor(function(){fn.New$1.call(this,"A task was canceled.")},fn),fn.New$1=Mn.Ctor(function(n){this.message=n,f.Object.setPrototypeOf(this,fn.prototype)},fn),(hn=n.KeyNotFoundException=Mn.Class({},h,hn)).New=Mn.Ctor(function(){hn.New$1.call(this,"The given key was not present in the dictionary.")},hn),hn.New$1=Mn.Ctor(function(n){this.message=n,f.Object.setPrototypeOf(this,hn.prototype)},hn),M.create2D=function(n){n=M.ofSeq(W.map(M.ofSeq,n));return n.dims=2,n},dn.NewGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new f.RegExp("[xy]","g"),function(n){var t=16*Vn.random()|0;return("x"==n?t:3&t|8).toString(16)})},dn.TryParseExact=function(n,t,e){try{return e.set(dn.ParseExact(n,t)),!0}catch(n){return!1}},dn.TryParse=function(n,t){try{return t.set(dn.Parse(n)),!0}catch(n){return!1}},dn.ParseExact=function(n,t){var e,r,o,i,u,a,c,s;function l(n){for(var t,e=0;e<=35;e++)8===e||13===e||18===e||23===e?"-"!==n[e]&&dn.ShapeError():"0"<=(t=n[e])&&t<="9"||"a"<=t&&t<="f"||dn.ShapeError();return n}if("N"===(r=t.toUpperCase())){for(32!==(o=In.Trim(n).toLowerCase()).length&&dn.ShapeError(),i=0,0;i<=31;i++)"0"<=(u=o[i])&&u<="9"||"a"<=u&&u<="f"||dn.ShapeError();return In.Substring(o,0,8)+"-"+In.Substring(o,8,4)+"-"+In.Substring(o,12,4)+"-"+In.Substring(o,16,4)+"-"+o.substring(20)}if("D"===r)return 36!==(t=In.Trim(n).toLowerCase()).length&&dn.ShapeError(),l(t);if("B"===r)return 38===(e=In.Trim(n).toLowerCase()).length&&"{"===e[0]&&"}"===e[17]||dn.ShapeError(),l(In.Substring(e,1,36));if("P"===r)return 38===(e=In.Trim(n).toLowerCase()).length&&"("===e[0]&&")"===e[17]||dn.ShapeError(),l(In.Substring(e,1,36));if("X"!==r)return dn.FormatError();for(68!==(a=In.Trim(n).toLowerCase()).length&&dn.ShapeError(),c=0,0;c<=67;c++)switch(c){case 26:case 0:"{"!==a[c]&&dn.ShapeError();break;case 62:case 57:case 52:case 47:case 42:case 37:case 32:case 27:case 19:case 12:case 1:"0"!==a[c]&&dn.ShapeError();break;case 63:case 58:case 53:case 48:case 43:case 38:case 33:case 28:case 20:case 13:case 2:"x"!==a[c]&&dn.ShapeError();break;case 61:case 56:case 51:case 46:case 41:case 36:case 31:case 25:case 18:case 11:","!==a[c]&&dn.ShapeError();break;case 67:case 66:"{"!==a[c]&&dn.ShapeError();break;default:"0"<=(s=a[c])&&s<="9"||"a"<=s&&s<="f"||dn.ShapeError()}return In.Substring(a,3,8)+"-"+In.Substring(a,14,4)+"-"+In.Substring(a,21,4)+"-"+In.Substring(a,29,2)+In.Substring(a,34,2)+"-"+In.Substring(a,39,2)+In.Substring(a,44,2)+In.Substring(a,49,2)+In.Substring(a,54,2)+In.Substring(a,59,2)+In.Substring(a,64,2)},dn.Parse=function(t){var e,r,o;try{return dn.ParseExact(t,"D")}catch(n){try{e=dn.ParseExact(t,"B")}catch(n){try{r=dn.ParseExact(t,"P")}catch(n){try{o=dn.ParseExact(t,"N")}catch(n){o=dn.ParseExact(t,"X")}r=o}e=r}return e}},dn.ToString=function(n,t){t=t.toUpperCase();return"N"===t?In.Replace(n,"-",""):"D"===t?n:"B"===t?"{"+n+"}":"P"===t?"("+n+")":"X"===t?"{0x"+In.Substring(n,0,8)+",0x"+In.Substring(n,9,4)+",0x"+In.Substring(n,14,4)+",{0x"+In.Substring(n,19,2)+",0x"+In.Substring(n,21,2)+",0x"+In.Substring(n,24,2)+",0x"+In.Substring(n,26,2)+",0x"+In.Substring(n,28,2)+",0x"+In.Substring(n,30,2)+",0x"+In.Substring(n,32,2)+",0x"+In.Substring(n,34,2)+"}}":dn.FormatError()},dn.ParseError=function(){throw new sn.New$1("Unrecognized Guid format.")},dn.ShapeError=function(){throw new sn.New$1("Guid should contain 32 digits with 4 dashes (xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).")},dn.HexaError=function(){throw new sn.New$1("Hexadecimal Guid printing not implemented by WebSharper.")},dn.FormatError=function(){throw new sn.New$1('Format String can be only "D", "d", "N", "n", "P", "p", "B", "b", "X" or "x".')},yn.concat=function(n){var t,e=[];for(t in n)e.push.apply(e,n[t]);return e},($n=v.HashSet=Mn.Class({add:function(n){var t=this.hash(n),e=this.data[t];return null==e?(this.data[t]=[n],this.count=this.count+1,!0):!this.arrContains(n,e)&&(e.push(n),this.count=this.count+1,!0)},arrRemove:function(n,t){for(var e=!0,r=0,o=t.length;e&&r<o;)this.equals.apply(null,[t[r],n])?(t.splice.apply(t,[r,1]),e=!1):r+=1;return!e},arrContains:function(n,t){for(var e=!0,r=0,o=t.length;e&&r<o;)this.equals.apply(null,[t[r],n])?e=!1:r+=1;return!e},UnionWith:function(n){var t=G.Get(n);try{for(;t.MoveNext();)this.Add(t.Current())}finally{"object"==typeof t&&"Dispose"in t&&t.Dispose()}},SymmetricExceptWith:function(n){var t,e=G.Get(n);try{for(;e.MoveNext();)t=e.Current(),this.Contains(t)?this.Remove(t):this.Add(t)}finally{"object"==typeof e&&"Dispose"in e&&e.Dispose()}},SetEquals:function(n){n=new $n.New$4(n,this.equals,this.hash);return this.get_Count()===n.get_Count()&&this.IsSupersetOf(n)},RemoveWhere:function(n){for(var t,e=yn.concat(this.data),r=0,o=0,i=e.length-1;o<=i;o++)!n(t=e[o])||this.Remove(t)&&(r+=1);return r},Remove:function(n){var t=this.data[this.hash(n)];return null!=t&&(this.arrRemove(n,t)&&(this.count=this.count-1,!0))},Overlaps:function(n){var t=this;return W.exists(function(n){return t.Contains(n)},n)},IsSupersetOf:function(n){var t=this;return W.forall(function(n){return t.Contains(n)},n)},IsSubsetOf:function(n){var t=new $n.New$4(n,this.equals,this.hash);return M.forall(function(n){return t.Contains(n)},yn.concat(this.data))},IsProperSupersetOf:function(n){n=M.ofSeq(n);return this.count>M.length(n)&&this.IsSupersetOf(n)},IsProperSubsetOf:function(n){n=M.ofSeq(n);return this.count<M.length(n)&&this.IsSubsetOf(n)},IntersectWith:function(n){for(var t,e=new $n.New$4(n,this.equals,this.hash),r=yn.concat(this.data),o=0,i=r.length-1;o<=i;o++)t=r[o],e.Contains(t)||this.Remove(t)},ExceptWith:function(n){var t=G.Get(n);try{for(;t.MoveNext();)this.Remove(t.Current())}finally{"object"==typeof t&&"Dispose"in t&&t.Dispose()}},get_Count:function(){return this.count},CopyTo:function(n){for(var t=yn.concat(this.data),e=0,r=t.length-1;e<=r;e++)M.set(n,e,t[e])},Contains:function(n){var t=this.data[this.hash(n)];return null!=t&&this.arrContains(n,t)},Clear:function(){this.data=[],this.count=0},Add:function(n){return this.add(n)},GetEnumerator:function(){return G.Get(yn.concat(this.data))},GetEnumerator0:function(){return G.Get(yn.concat(this.data))}},u,$n)).New=Mn.Ctor(function(n,t){$n.New$4.call(this,n,U.equals(t),function(n){return U.getHashCode(t,n)})},$n),$n.New$1=Mn.Ctor(function(t){$n.New$4.call(this,[],U.equals(t),function(n){return U.getHashCode(t,n)})},$n),$n.New$2=Mn.Ctor(function(n){$n.New$4.call(this,n,Gn.Equals,Gn.Hash)},$n),$n.New$3=Mn.Ctor(function(){$n.New$4.call(this,[],Gn.Equals,Gn.Hash)},$n),$n.New$4=Mn.Ctor(function(n,t,e){var r;u.New.call(this),this.equals=t,this.hash=e,this.data=[],this.count=0,r=G.Get(n);try{for(;r.MoveNext();)this.add(r.Current())}finally{"object"==typeof r&&"Dispose"in r&&r.Dispose()}},$n),(mn=gn.DictionaryEntry=Mn.Class({set_Value:function(n){this.innerValue=n},Value:function(){return this.innerValue},set_Key:function(n){this.innerKey=n},Key:function(){return this.innerKey}},u,mn)).New=Mn.Ctor(function(n,t){u.New.call(this),this.innerKey=n,this.innerValue=t},mn),wn.New=function(n,t,e){return{c:n,v:t,f:e}},Cn.Force=function(n){return n.f()},Cn.CreateFromValue=function(n){return wn.New(!0,n,Cn.cachedLazy)},Cn.Create=function(n){return wn.New(!1,n,Cn.forceLazy)},Cn.forceLazy=function(){var n=this.v();return this.c=!0,this.v=n,this.f=Cn.cachedLazy,n},Cn.cachedLazy=function(){return this.v},(Nn=R.T=Mn.Class({GetSlice:function(n,t){var e;return null!=n&&1==n.$?null!=t&&1==t.$?(e=n.$0,R.ofSeq(W.take(t.$0-e+1,R.skip(e,this)))):R.skip(n.$0,this):null!=t&&1==t.$?R.ofSeq(W.take(t.$0+1,this)):this},get_Item:function(n){return W.nth(n,this)},get_Length:function(){return R.length(this)},GetEnumerator:function(){return new O.New(this,null,function(n){var t=n.s;return 0!=t.$&&(n.c=t.$0,n.s=t.$1,!0)},void 0)},GetEnumerator0:function(){return G.Get(this)}},null,Nn)).Empty=new Nn({$:0}),R.allPairs=function(n,t){return R.ofArray(M.allPairs(M.ofList(n),M.ofList(t)))},R.append=function(n,t){var e,r,o,i,u;if(0==n.$)return t;if(0==t.$)return n;for(e=i=new Nn({$:1}),r=n,o=!0;o;)e.$0=r.$0,0==(r=r.$1).$?o=!1:(u=new Nn({$:1}),e.$1=u,e=u);return e.$1=t,i},R.choose=function(n,t){return R.ofSeq(W.choose(n,t))},R.collect=function(n,t){return R.ofSeq(W.collect(n,t))},R.concat=function(n){return R.ofSeq(W.concat(n))},R.exists=function(n,t){for(var e=!1,r=t;!e&&1==r.$;)e=n(r.$0),r=r.$1;return e},R.exists2=function(n,t,e){for(var r=!1,o=t,i=e;!r&&1==o.$&&1==i.$;)r=n(o.$0,i.$0),o=o.$1,i=i.$1;return r||1!=o.$&&1!=i.$||R.badLengths(),r},R.filter=function(n,t){return R.ofSeq(W.filter(n,t))},R.fold2=function(n,t,e,r){return M.fold2(n,t,M.ofList(e),M.ofList(r))},R.foldBack=function(n,t,e){return M.foldBack(n,M.ofList(t),e)},R.foldBack2=function(n,t,e,r){return M.foldBack2(n,M.ofList(t),M.ofList(e),r)},R.forAll=function(n,t){for(var e=!0,r=t;e&&1==r.$;)e=n(r.$0),r=r.$1;return e},R.forall2=function(n,t,e){for(var r=!0,o=t,i=e;r&&1==o.$&&1==i.$;)r=n(o.$0,i.$0),o=o.$1,i=i.$1;return!r||1!=o.$&&1!=i.$||R.badLengths(),r},R.head=function(n){return 1==n.$?n.$0:R.listEmpty()},R.init=function(n,t){return R.ofArray(M.init(n,t))},R.iter=function(n,t){for(var e=t;1==e.$;)n(R.head(e)),e=R.tail(e)},R.iter2=function(n,t,e){for(var r=t,o=e;1==r.$;)0==o.$&&R.badLengths(),n(R.head(r),R.head(o)),r=R.tail(r),o=R.tail(o);1==o.$&&R.badLengths()},R.iteri=function(n,t){for(var e=t,r=0;1==e.$;)n(r,R.head(e)),e=R.tail(e),r+=1},R.iteri2=function(n,t,e){for(var r=t,o=e,i=0;1==r.$;)0==o.$&&R.badLengths(),n(i,R.head(r),R.head(o)),r=R.tail(r),o=R.tail(o),i+=1;1==o.$&&R.badLengths()},R.length=function(n){for(var t=n,e=0;1==t.$;)t=R.tail(t),e+=1;return e},R.map=function(n,t){var e,r,o,i,u;if(0==t.$)return t;for(e=i=new Nn({$:1}),r=t,o=!0;o;)e.$0=n(r.$0),0==(r=r.$1).$?o=!1:(u=new Nn({$:1}),e.$1=u,e=u);return e.$1=Nn.Empty,i},R.map2=function(n,t,e){var r,o,i,u,a,c=1==t.$&&1==e.$;if(c){for(r=u=new Nn({$:1}),o=t,i=e;c;)r.$0=n(o.$0,i.$0),o=o.$1,i=i.$1,1==o.$&&1==i.$?(a=new Nn({$:1}),r.$1=a,r=a):c=!1;return 1!=o.$&&1!=i.$||R.badLengths(),r.$1=Nn.Empty,u}return 1==t.$||1==e.$?R.badLengths():t},R.map3=function(n,t,e,r){var o,i,u,a,c,s,l=1==t.$&&1==e.$&&1==r.$;if(l){for(o=c=new Nn({$:1}),i=t,u=e,a=r;l;)o.$0=n(i.$0,u.$0,a.$0),i=i.$1,u=u.$1,a=a.$1,1==i.$&&1==u.$&&1==a.$?(s=new Nn({$:1}),o.$1=s,o=s):l=!1;return 1!=i.$&&1!=u.$&&1!=a.$||R.badLengths(),o.$1=Nn.Empty,c}return 1==t.$||1==e.$||1==r.$?R.badLengths():t},R.mapi=function(n,t){var e,r,o,i,u,a;if(0==t.$)return t;for(e=u=new Nn({$:1}),r=t,i=!(o=0);i;)e.$0=n(o,r.$0),0==(r=r.$1).$?i=!1:(a=new Nn({$:1}),e.$1=a,e=a,o+=1);return e.$1=Nn.Empty,u},R.mapi2=function(n,t,e){var r,o,i,u,a,c,s=1==t.$&&1==e.$;if(s){for(r=a=new Nn({$:1}),o=t,i=e,u=0;s;)r.$0=n(u,o.$0,i.$0),o=o.$1,i=i.$1,1==o.$&&1==i.$?(c=new Nn({$:1}),r.$1=c,r=c,u+=1):s=!1;return 1!=o.$&&1!=i.$||R.badLengths(),r.$1=Nn.Empty,a}return 1==t.$||1==e.$?R.badLengths():t},R.max=function(n){var t,e,r;for(R.nonEmpty(n),t=n.$0,e=n.$1;1==e.$;)r=e.$0,1===Gn.Compare(r,t)&&(t=r),e=e.$1;return t},R.maxBy=function(n,t){var e,r,o,i,u;for(R.nonEmpty(t),r=n(e=t.$0),o=t.$1;1==o.$;)u=n(i=o.$0),1===Gn.Compare(u,r)&&(e=i,r=u),o=o.$1;return e},R.min=function(n){var t,e,r;for(R.nonEmpty(n),t=n.$0,e=n.$1;1==e.$;)r=e.$0,-1===Gn.Compare(r,t)&&(t=r),e=e.$1;return t},R.minBy=function(n,t){var e,r,o,i,u;for(R.nonEmpty(t),r=n(e=t.$0),o=t.$1;1==o.$;)u=n(i=o.$0),-1===Gn.Compare(u,r)&&(e=i,r=u),o=o.$1;return e},R.ofArray=function(n){for(var t=Nn.Empty,e=M.length(n)-1;0<=e;e--)t=new Nn({$:1,$0:M.get(n,e),$1:t});return t},R.ofSeq=function(n){var t,e,r,o,i,u;if(n instanceof Nn)return n;if(n instanceof f.Array)return R.ofArray(n);t=G.Get(n);try{if(r=t.MoveNext()){for(o=i=new Nn({$:1});r;)o.$0=t.Current(),t.MoveNext()?(u=new Nn({$:1}),o.$1=u,o=u):r=!1;o.$1=Nn.Empty,e=i}else e=Nn.Empty;return e}finally{"object"==typeof t&&"Dispose"in t&&t.Dispose()}},R.partition=function(n,t){t=M.partition(n,M.ofList(t));return[R.ofArray(t[0]),R.ofArray(t[1])]},R.permute=function(n,t){return R.ofArray(M.permute(n,M.ofList(t)))},R.reduce=function(n,t){var e,r;for(R.nonEmpty(t),e=t.$0,r=t.$1;1==r.$;)e=n(e,r.$0),r=r.$1;return e},R.reduceBack=function(n,t){return M.reduceBack(n,M.ofList(t))},R.replicate=function(n,t){return R.ofArray(M.create(n,t))},R.rev=function(n){for(var t=Nn.Empty,e=n;1==e.$;)t=new Nn({$:1,$0:e.$0,$1:t}),e=e.$1;return t},R.scan=function(n,t,e){return R.ofSeq(W.scan(n,t,e))},R.scanBack=function(n,t,e){return R.ofArray(M.scanBack(n,M.ofList(t),e))},R.sort=function(n){n=M.ofList(n);return M.sortInPlace(n),R.ofArray(n)},R.sortBy=function(n,t){t=M.ofList(t);return M.sortInPlaceBy(n,t),R.ofArray(t)},R.sortByDescending=function(n,t){t=M.ofList(t);return M.sortInPlaceByDescending(n,t),R.ofArray(t)},R.sortDescending=function(n){n=M.ofList(n);return M.sortInPlaceByDescending(f.id,n),R.ofArray(n)},R.sortWith=function(n,t){t=M.ofList(t);return M.sortInPlaceWith(n,t),R.ofArray(t)},R.tail=function(n){return 1==n.$?n.$1:R.listEmpty()},R.transpose=function(n){return R.ofSeq(W.map(R.ofArray,M.transposeArray(M.ofSeq(W.map(M.ofList,n)))))},R.unzip=function(n){var t,e=[],r=[],o=G.Get(n);try{for(;o.MoveNext();)t=o.Current(),e.push(t[0]),r.push(t[1])}finally{"object"==typeof o&&"Dispose"in o&&o.Dispose()}return[R.ofArray(e.slice(0)),R.ofArray(r.slice(0))]},R.unzip3=function(n){var t,e=[],r=[],o=[],i=G.Get(n);try{for(;i.MoveNext();)t=i.Current(),e.push(t[0]),r.push(t[1]),o.push(t[2])}finally{"object"==typeof i&&"Dispose"in i&&i.Dispose()}return[R.ofArray(e.slice(0)),R.ofArray(r.slice(0)),R.ofArray(o.slice(0))]},R.zip=function(n,t){return R.map2(function(n,t){return[n,t]},n,t)},R.zip3=function(n,t,e){return R.map3(function(n,t,e){return[n,t,e]},n,t,e)},R.chunkBySize=function(n,t){return R.map(R.ofArray,R.ofSeq(W.chunkBySize(n,t)))},R.compareWith=function(n,t,e){return W.compareWith(n,t,e)},R.countBy=function(n,t){return R.ofArray(M.countBy(n,M.ofList(t)))},R.distinct=function(n){return R.ofSeq(W.distinct(n))},R.distinctBy=function(n,t){return R.ofSeq(W.distinctBy(n,t))},R.splitInto=function(n,t){return R.map(R.ofArray,R.ofArray(M.splitInto(n,M.ofList(t))))},R.except=function(n,t){return R.ofSeq(W.except(n,t))},R.tryFindBack=function(n,t){return M.tryFindBack(n,M.ofList(t))},R.findBack=function(n,t){t=R.tryFindBack(n,t);return null==t?b.FailWith("KeyNotFoundException"):t.$0},R.findIndexBack=function(n,t){t=M.tryFindIndexBack(n,M.ofList(t));return null==t?b.FailWith("KeyNotFoundException"):t.$0},R.groupBy=function(n,t){return t=M.groupBy(n,M.ofList(t)),M.mapInPlace(function(n){return t=n[0],n=n[1],[t,R.ofArray(n)];var t},t),R.ofArray(t)},R.last=function(n){var t,e;for(R.nonEmpty(n),e=(t=n).$1;1==e.$;)e=(t=e).$1;return t.$0},R.contains=function(n,t){for(var e=!1,r=t;!e&&1==r.$;)e=Gn.Equals(n,r.$0),r=r.$1;return e},R.mapFold=function(n,t,e){e=M.mapFold(n,t,M.ofList(e));return[R.ofArray(e[0]),e[1]]},R.mapFoldBack=function(n,t,e){e=M.mapFoldBack(n,M.ofList(t),e);return[R.ofArray(e[0]),e[1]]},R.pairwise=function(n){return R.ofSeq(W.pairwise(n))},R.indexed=function(n){return R.mapi(function(n,t){return[n,t]},n)},R.tryHead=function(n){return 0==n.$?null:{$:1,$0:n.$0}},R.exactlyOne=function(n){var t;return 1==n.$&&0==n.$1.$&&(t=n.$0,1)?t:b.FailWith("The input does not have precisely one element.")},R.tryExactlyOne=function(n){var t;return 1==n.$&&0==n.$1.$&&(t=n.$0,1)?{$:1,$0:t}:null},R.unfold=function(n,t){return R.ofSeq(W.unfold(n,t))},R.windowed=function(n,t){return R.ofSeq(W.map(R.ofArray,W.windowed(n,t)))},R.splitAt=function(n,t){return[R.ofSeq(W.take(n,t)),R.skip(n,t)]},R.nonEmpty=function(n){0==n.$&&R.listEmpty()},R.listEmpty=function(){return b.FailWith("The input list was empty.")},R.badLengths=function(){return b.FailWith("The lists have different lengths.")},D.getOrValue=function(n,t){return null===n?t:n},D.get=function(n){return null===n?b.FailWith("Nullable object must have a value."):n},b.range=function(t,n){n=1+n-t;return n<=0?[]:W.init(n,function(n){return n+t})},b.step=function(t,e,r){var o=b.Sign(e);return W.takeWhile(function(n){return 0<=o*(r-n)},W.initInfinite(function(n){return t+n*e}))},b.KeyValue=function(n){return[n.K,n.V]},b.Truncate=function(n){return n<0?Vn.ceil(n):Vn.floor(n)},b.Sign=function(n){return 0===n?0:n<0?-1:1},b.Pown=function(r,n){return function n(t){var e;return 1===t?r:t%2==0?(e=n(t/2>>0))*e:r*n(t-1)}(n)},b.toInt=function(n){n=b.toUInt(n);return 2147483648<=n?n-4294967296:n},b.toUInt=function(n){return(n<0?Vn.ceil(n):Vn.floor(n))>>>0},b.InvalidArg=function(n,t){throw new en.New(n,t)},b.InvalidOp=function(n){throw new un.New(n)},b.FailWith=function(n){throw new h(n)},xn.string=function(n,t,e){return null==t?null!=e&&1==e.$?n.slice(0,e.$0+1):"":null==e?n.slice(t.$0):n.slice(t.$0,e.$0+1)},xn.array=function(n,t,e){return null==t?null!=e&&1==e.$?n.slice(0,e.$0+1):[]:null==e?n.slice(t.$0):n.slice(t.$0,e.$0+1)},xn.setArray=function(n,t,e,r){t=null!=t&&1==t.$?t.$0:0;M.setSub(n,t,(null!=e&&1==e.$?e.$0:n.length-1)-t+1,r)},xn.array2D=function(n,t,e,r,o){t=null!=t&&1==t.$?t.$0:0,r=null!=r&&1==r.$?r.$0:0;return M.sub2D(n,t,r,(null!=e&&1==e.$?e.$0:n.length-1)-t+1,(null!=o&&1==o.$?o.$0:(n.length?n[0].length:0)-1)-r+1)},xn.array2Dfix1=function(n,t,e,r){for(var o=null!=e&&1==e.$?e.$0:0,r=(null!=r&&1==r.$?r.$0:(n.length?n[0].length:0)-1)-o+1,i=new f.Array(r),u=0,a=r-1;u<=a;u++)M.set(i,u,M.get2D(n,t,o+u));return i},xn.array2Dfix2=function(n,t,e,r){for(var o=null!=t&&1==t.$?t.$0:0,e=(null!=e&&1==e.$?e.$0:n.length-1)-o+1,i=new f.Array(e),u=0,a=e-1;u<=a;u++)M.set(i,u,M.get2D(n,o+u,r));return i},xn.setArray2Dfix1=function(n,t,e,r,o){for(var i=null!=e&&1==e.$?e.$0:0,u=0,a=(null!=r&&1==r.$?r.$0:(n.length?n[0].length:0)-1)-i+1-1;u<=a;u++)M.set2D(n,t,i+u,M.get(o,u))},xn.setArray2Dfix2=function(n,t,e,r,o){for(var i=null!=t&&1==t.$?t.$0:0,u=0,a=(null!=e&&1==e.$?e.$0:n.length-1)-i+1-1;u<=a;u++)M.set2D(n,i+u,r,M.get(o,u))},xn.setArray2D=function(n,t,e,r,o,i){t=null!=t&&1==t.$?t.$0:0,r=null!=r&&1==r.$?r.$0:0;M.setSub2D(n,t,r,(null!=e&&1==e.$?e.$0:n.length-1)-t+1,(null!=o&&1==o.$?o.$0:(n.length?n[0].length:0)-1)-r+1,i)},En.filter=function(n,t){return null!=t&&1==t.$&&n(t.$0)&&(t.$0,1)?t:null},En.fold=function(n,t,e){return null==e?t:n(t,e.$0)},En.foldBack=function(n,t,e){return null==t?e:n(t.$0,e)},En.ofNullable=function(n){return null==n?null:{$:1,$0:D.get(n)}},En.ofObj=function(n){return null==n?null:{$:1,$0:n}},En.toArray=function(n){return null==n?[]:[n.$0]},En.toList=function(n){return null==n?Nn.Empty:R.ofArray([n.$0])},En.toNullable=function(n){return null!=n&&1==n.$?n.$0:null},En.toObj=function(n){return null==n?null:n.$0},Sn.CopyTo=function(n,t,e){M.blit(n,0,t,e,M.length(n))},Sn.Contains=function(n,t){return W.exists(function(n){return Gn.Equals(t,n)},n)},Sn.Clear=function(n){n.splice(0,M.length(n))},(kn=n.Random=Mn.Class({NextBytes:function(n){for(var t=0,e=M.length(n)-1;t<=e;t++)M.set(n,t,Vn.floor(256*Vn.random()))},Next:function(n,t){return t<n?b.FailWith("'minValue' cannot be greater than maxValue."):n+Vn.floor(Vn.random()*(t-n))},Next$1:function(n){return n<0?b.FailWith("'maxValue' must be greater than zero."):Vn.floor(Vn.random()*n)},Next$2:function(){return Vn.floor(2147483648*Vn.random())}},u,kn)).New=Mn.Ctor(function(){u.New.call(this)},kn),bn.New=function(n){return[n]},Dn.MapError=function(n,t){return 1==t.$?{$:1,$0:n(t.$0)}:{$:0,$0:t.$0}},Dn.Map=function(n,t){return 1==t.$?{$:1,$0:t.$0}:{$:0,$0:n(t.$0)}},Dn.Bind=function(n,t){return 1==t.$?{$:1,$0:t.$0}:n(t.$0)},W.enumFinally=function(n,e){return{GetEnumerator:function(){var t;try{t=G.Get(n)}catch(n){throw e(),n}return new O.New(null,null,function(n){return t.MoveNext()&&(n.c=t.Current(),!0)},function(){t.Dispose(),e()})}}},W.enumUsing=function(e,n){return{GetEnumerator:function(){var t;try{t=G.Get(n(e))}catch(n){throw e.Dispose(),n}return new O.New(null,null,function(n){return t.MoveNext()&&(n.c=t.Current(),!0)},function(){t.Dispose(),e.Dispose()})}}},W.enumWhile=function(e,r){return{GetEnumerator:function(){return new O.New(null,null,function(n){for(var t;;)if(t=n.s,Gn.Equals(t,null)){if(!e())return!1;n.s=G.Get(r)}else{if(t.MoveNext())return n.c=t.Current(),!0;t.Dispose(),n.s=null}},function(n){n=n.s;Gn.Equals(n,null)||n.Dispose()})}}},Tn.createEvent=function(e,r,o){var n={AddHandler:e,RemoveHandler:r,Subscribe:function(t){var n=o(function(){return function(n){return t.OnNext(n)}});return e(n),{Dispose:function(){return r(n)}}}};return u.New.call(n),n},W.allPairs=function(n,t){var e=W.cache(t);return W.collect(function(t){return W.map(function(n){return[t,n]},e)},n)},W.append=function(t,r){return{GetEnumerator:function(){var n=G.Get(t),e=[!0];return new O.New(n,null,function(n){var t;return n.s.MoveNext()?(n.c=n.s.Current(),!0):(t=n.s,Gn.Equals(t,null)||t.Dispose(),n.s=null,e[0]&&(e[0]=!1,n.s=G.Get(r),n.s.MoveNext()?(n.c=n.s.Current(),!0):(n.s.Dispose(),n.s=null,!1)))},function(n){n=n.s;Gn.Equals(n,null)||n.Dispose()})}}},W.average=function(n){var t=W.fold(function(n,t){return e=n[0],n=n[1],[e+1,n+t];var e},[0,0],n),n=t[0];return 0===n?W.seqEmpty():t[1]/n},W.averageBy=function(o,n){var t=W.fold(function(n,t){return e=n[0],r=n[1],function(n){return[e+1,r+o(n)]}(t);var e,r},[0,0],n),n=t[0];return 0===n?W.seqEmpty():t[1]/n},W.cache=function(n){var e=[],r=[G.Get(n)];return{GetEnumerator:function(){return new O.New(0,null,function(n){var t;return n.s<e.length?(n.c=e[n.s],n.s=n.s+1,!0):(t=r[0],!Gn.Equals(t,null)&&(t.MoveNext()?(n.s=n.s+1,n.c=t.Current(),e.push(n.c),!0):(t.Dispose(),r[0]=null,!1)))},void 0)}}},W.choose=function(t,n){return W.collect(function(n){n=t(n);return null==n?Nn.Empty:R.ofArray([n.$0])},n)},W.collect=function(n,t){return W.concat(W.map(n,t))},W.compareWith=function(n,t,e){var r,o,i,u,a=G.Get(t);try{o=G.Get(e);try{for(u=!(i=0);u&&0===i;)a.MoveNext()?i=o.MoveNext()?n(a.Current(),o.Current()):1:o.MoveNext()?i=-1:u=!1;r=i}finally{"object"==typeof o&&"Dispose"in o&&o.Dispose()}return r}finally{"object"==typeof a&&"Dispose"in a&&a.Dispose()}},W.concat=function(n){return{GetEnumerator:function(){var e=G.Get(n);return new O.New(null,null,function(n){for(var t;;)if(t=n.s,Gn.Equals(t,null)){if(!e.MoveNext())return e.Dispose(),!1;n.s=G.Get(e.Current())}else{if(t.MoveNext())return n.c=t.Current(),!0;n.Dispose(),n.s=null}},function(n){n=n.s;Gn.Equals(n,null)||n.Dispose(),Gn.Equals(e,null)||e.Dispose()})}}},W.countBy=function(n,t){return W.delay(function(){return M.countBy(n,M.ofSeq(t))})},W.delay=function(n){return{GetEnumerator:function(){return G.Get(n())}}},W.distinct=function(n){return W.distinctBy(f.id,n)},W.distinctBy=function(i,n){return{GetEnumerator:function(){var r=G.Get(n),o=new $n.New$3;return new O.New(null,null,function(n){var t,e;if(r.MoveNext()){for(t=r.Current(),e=o.Add(i(t));!e&&r.MoveNext();)t=r.Current(),e=o.Add(i(t));return e&&(n.c=t,!0)}return!1},function(){r.Dispose()})}}},W.splitInto=function(n,t){return n<=0&&b.FailWith("Count must be positive"),W.delay(function(){return M.splitInto(n,M.ofSeq(t))})},W.exactlyOne=function(n){var t,n=G.Get(n);try{return n.MoveNext()?(t=n.Current(),n.MoveNext()?b.InvalidOp("Sequence contains more than one element"):t):b.InvalidOp("Sequence contains no elements")}finally{"object"==typeof n&&"Dispose"in n&&n.Dispose()}},W.tryExactlyOne=function(n){var t,n=G.Get(n);try{return n.MoveNext()?(t=n.Current(),n.MoveNext()?null:{$:1,$0:t}):null}finally{"object"==typeof n&&"Dispose"in n&&n.Dispose()}},W.exists=function(n,t){var e,r=G.Get(t);try{for(e=!1;!e&&r.MoveNext();)e=n(r.Current());return e}finally{"object"==typeof r&&"Dispose"in r&&r.Dispose()}},W.exists2=function(n,t,e){var r,o,i,u=G.Get(t);try{o=G.Get(e);try{for(i=!1;!i&&u.MoveNext()&&o.MoveNext();)i=n(u.Current(),o.Current());r=i}finally{"object"==typeof o&&"Dispose"in o&&o.Dispose()}return r}finally{"object"==typeof u&&"Dispose"in u&&u.Dispose()}},W.filter=function(i,n){return{GetEnumerator:function(){var o=G.Get(n);return new O.New(null,null,function(n){for(var t=o.MoveNext(),e=o.Current(),r=!1;t;)i(e)?(n.c=e,t=!(r=!0)):o.MoveNext()?e=o.Current():t=!1;return r},function(){o.Dispose()})}}},W.find=function(n,t){t=W.tryFind(n,t);return null==t?b.FailWith("KeyNotFoundException"):t.$0},W.findIndex=function(n,t){t=W.tryFindIndex(n,t);return null==t?b.FailWith("KeyNotFoundException"):t.$0},W.fold=function(n,t,e){var r=t,o=G.Get(e);try{for(;o.MoveNext();)r=n(r,o.Current());return r}finally{"object"==typeof o&&"Dispose"in o&&o.Dispose()}},W.forall=function(t,n){return!W.exists(function(n){return!t(n)},n)},W.forall2=function(e,n,t){return!W.exists2(function(n,t){return!e(n,t)},n,t)},W.groupBy=function(n,t){return W.delay(function(){return M.groupBy(n,M.ofSeq(t))})},W.head=function(n){n=G.Get(n);try{return n.MoveNext()?n.Current():W.insufficient()}finally{"object"==typeof n&&"Dispose"in n&&n.Dispose()}},W.init=function(n,t){return W.take(n,W.initInfinite(t))},W.initInfinite=function(t){return{GetEnumerator:function(){return new O.New(0,null,function(n){return n.c=t(n.s),n.s=n.s+1,!0},void 0)}}},W.isEmpty=function(n){n=G.Get(n);try{return!n.MoveNext()}finally{"object"==typeof n&&"Dispose"in n&&n.Dispose()}},W.iter=function(n,t){var e=G.Get(t);try{for(;e.MoveNext();)n(e.Current())}finally{"object"==typeof e&&"Dispose"in e&&e.Dispose()}},W.iter2=function(n,t,e){var r,o=G.Get(t);try{r=G.Get(e);try{for(;o.MoveNext()&&r.MoveNext();)n(o.Current(),r.Current());0}finally{"object"==typeof r&&"Dispose"in r&&r.Dispose()}}finally{"object"==typeof o&&"Dispose"in o&&o.Dispose()}},W.iteri=function(n,t){var e=0,r=G.Get(t);try{for(;r.MoveNext();)n(e,r.Current()),e+=1}finally{"object"==typeof r&&"Dispose"in r&&r.Dispose()}},W.length=function(n){var t=0,e=G.Get(n);try{for(;e.MoveNext();)t+=1;return t}finally{"object"==typeof e&&"Dispose"in e&&e.Dispose()}},W.map=function(e,n){return{GetEnumerator:function(){var t=G.Get(n);return new O.New(null,null,function(n){return t.MoveNext()&&(n.c=e(t.Current()),!0)},function(){t.Dispose()})}}},W.mapi=function(n,t){return W.map2(n,W.initInfinite(f.id),t)},W.map2=function(r,n,o){return{GetEnumerator:function(){var t=G.Get(n),e=G.Get(o);return new O.New(null,null,function(n){return t.MoveNext()&&e.MoveNext()&&(n.c=r(t.Current(),e.Current()),!0)},function(){t.Dispose(),e.Dispose()})}}},W.maxBy=function(n,t){var e,r,o,i,u=G.Get(t);try{for(u.MoveNext()||W.seqEmpty(),r=n(e=u.Current());u.MoveNext();)i=n(o=u.Current()),1===Gn.Compare(i,r)&&(e=o,r=i);return e}finally{"object"==typeof u&&"Dispose"in u&&u.Dispose()}},W.minBy=function(n,t){var e,r,o,i,u=G.Get(t);try{for(u.MoveNext()||W.seqEmpty(),r=n(e=u.Current());u.MoveNext();)i=n(o=u.Current()),-1===Gn.Compare(i,r)&&(e=o,r=i);return e}finally{"object"==typeof u&&"Dispose"in u&&u.Dispose()}},W.max=function(n){var t,e,r=G.Get(n);try{for(r.MoveNext()||W.seqEmpty(),t=r.Current();r.MoveNext();)e=r.Current(),1===Gn.Compare(e,t)&&(t=e);return t}finally{"object"==typeof r&&"Dispose"in r&&r.Dispose()}},W.min=function(n){var t,e,r=G.Get(n);try{for(r.MoveNext()||W.seqEmpty(),t=r.Current();r.MoveNext();)e=r.Current(),-1===Gn.Compare(e,t)&&(t=e);return t}finally{"object"==typeof r&&"Dispose"in r&&r.Dispose()}},W.nth=function(n,t){var e,r;n<0&&b.FailWith("negative index requested"),e=-1,r=G.Get(t);try{for(;e<n;)r.MoveNext()||W.insufficient(),e+=1;return r.Current()}finally{"object"==typeof r&&"Dispose"in r&&r.Dispose()}},W.pairwise=function(n){return W.map(function(n){return[M.get(n,0),M.get(n,1)]},W.windowed(2,n))},W.pick=function(n,t){t=W.tryPick(n,t);return null==t?b.FailWith("KeyNotFoundException"):t.$0},W.readOnly=function(n){return{GetEnumerator:function(){return G.Get(n)}}},W.reduce=function(n,t){var e,r=G.Get(t);try{for(r.MoveNext()||W.seqEmpty(),e=r.Current();r.MoveNext();)e=n(e,r.Current());return e}finally{"object"==typeof r&&"Dispose"in r&&r.Dispose()}},W.scan=function(e,r,n){return{GetEnumerator:function(){var t=G.Get(n);return new O.New(!1,null,function(n){return n.s?t.MoveNext()&&(n.c=e(n.c,t.Current()),!0):(n.c=r,n.s=!0)},function(){t.Dispose()})}}},W.skip=function(o,n){return{GetEnumerator:function(){var r=G.Get(n);return new O.New(!0,null,function(n){var t,e;if(n.s){for(t=1,e=o;t<=e;t++)r.MoveNext()||W.insufficient();n.s=!1}return r.MoveNext()&&(n.c=r.Current(),!0)},function(){r.Dispose()})}}},W.skipWhile=function(o,n){return{GetEnumerator:function(){var r=G.Get(n);return new O.New(!0,null,function(n){var t,e;if(n.s){for(e=!(t=!0);t;)r.MoveNext()?o(r.Current())||(t=!1):e=!(t=!1);return n.s=!1,!e&&(n.c=r.Current(),!0)}return r.MoveNext()&&(n.c=r.Current(),!0)},function(){r.Dispose()})}}},W.sort=function(n){return W.sortBy(f.id,n)},W.sortBy=function(t,e){return W.delay(function(){var n=M.ofSeq(e);return M.sortInPlaceBy(t,n),n})},W.sortByDescending=function(t,e){return W.delay(function(){var n=M.ofSeq(e);return M.sortInPlaceByDescending(t,n),n})},W.sortDescending=function(n){return W.sortByDescending(f.id,n)},W.sum=function(n){return W.fold(function(n,t){return n+t},0,n)},W.sumBy=function(e,n){return W.fold(function(n,t){return n+e(t)},0,n)},W.take=function(r,n){return r<0&&W.nonNegative(),{GetEnumerator:function(){var e=[G.Get(n)];return new O.New(0,null,function(n){var t;return n.s=n.s+1,!(n.s>r)&&(t=e[0],Gn.Equals(t,null)?W.insufficient():t.MoveNext()?(n.c=t.Current(),n.s===r&&(t.Dispose(),e[0]=null),!0):(t.Dispose(),e[0]=null,W.insufficient()))},function(){var n=e[0];Gn.Equals(n,null)||n.Dispose()})}}},W.takeWhile=function(t,n){return W.delay(function(){return W.enumUsing(G.Get(n),function(n){return W.enumWhile(function(){return n.MoveNext()&&t(n.Current())},W.delay(function(){return[n.Current()]}))})})},W.transpose=function(n){return W.delay(function(){return M.transposeArray(M.ofSeq(W.map(M.ofSeq,n)))})},W.truncate=function(e,n){return W.delay(function(){return W.enumUsing(G.Get(n),function(n){var t=[0];return W.enumWhile(function(){return n.MoveNext()&&t[0]<e},W.delay(function(){return t[0]++,[n.Current()]}))})})},W.tryFind=function(n,t){var e,r,o=G.Get(t);try{for(e=null;null==e&&o.MoveNext();)n(r=o.Current())&&(e={$:1,$0:r});return e}finally{"object"==typeof o&&"Dispose"in o&&o.Dispose()}},W.findBack=function(n,t){t=M.tryFindBack(n,M.ofSeq(t));return null==t?b.FailWith("KeyNotFoundException"):t.$0},W.tryFindIndex=function(n,t){var e,r,o=G.Get(t);try{for(e=!0,r=0;e&&o.MoveNext();)n(o.Current())?e=!1:r+=1;return e?null:{$:1,$0:r}}finally{"object"==typeof o&&"Dispose"in o&&o.Dispose()}},W.findIndexBack=function(n,t){t=M.tryFindIndexBack(n,M.ofSeq(t));return null==t?b.FailWith("KeyNotFoundException"):t.$0},W.tryPick=function(n,t){var e,r=G.Get(t);try{for(e=null;Gn.Equals(e,null)&&r.MoveNext();)e=n(r.Current());return e}finally{"object"==typeof r&&"Dispose"in r&&r.Dispose()}},W.unfold=function(e,n){return{GetEnumerator:function(){return new O.New(n,null,function(n){var t=e(n.s);return null!=t&&(n.c=t.$0[0],n.s=t.$0[1],!0)},void 0)}}},W.windowed=function(e,n){return e<=0&&b.FailWith("The input must be positive."),W.delay(function(){return W.enumUsing(G.Get(n),function(n){var t=[];return W.append(W.enumWhile(function(){return t.length<e&&n.MoveNext()},W.delay(function(){return t.push(n.Current()),[]})),W.delay(function(){return t.length===e?W.append([t.slice(0)],W.delay(function(){return W.enumWhile(function(){return n.MoveNext()},W.delay(function(){return t.shift(),t.push(n.Current()),[t.slice(0)]}))})):[]}))})})},W.zip=function(n,t){return W.map2(function(n,t){return[n,t]},n,t)},W.map3=function(o,n,i,u){return{GetEnumerator:function(){var t=G.Get(n),e=G.Get(i),r=G.Get(u);return new O.New(null,null,function(n){return t.MoveNext()&&e.MoveNext()&&r.MoveNext()&&(n.c=o(t.Current(),e.Current(),r.Current()),!0)},function(){t.Dispose(),e.Dispose(),r.Dispose()})}}},W.zip3=function(n,t,e){return W.map3(function(n,t,e){return[n,t,e]},n,t,e)},W.fold2=function(n,t,e,r){return M.fold2(n,t,M.ofSeq(e),M.ofSeq(r))},W.foldBack=function(n,t,e){return M.foldBack(n,M.ofSeq(t),e)},W.foldBack2=function(n,t,e,r){return M.foldBack2(n,M.ofSeq(t),M.ofSeq(e),r)},W.iteri2=function(n,t,e){var r,o=0,i=G.Get(t);try{r=G.Get(e);try{for(;i.MoveNext()&&r.MoveNext();)n(o,i.Current(),r.Current()),o+=1;0}finally{"object"==typeof r&&"Dispose"in r&&r.Dispose()}}finally{"object"==typeof i&&"Dispose"in i&&i.Dispose()}},W.mapi2=function(n,t,e){return W.map3(n,W.initInfinite(f.id),t,e)},W.mapFold=function(n,t,e){return M.mapFold(n,t,M.ofSeq(e))},W.mapFoldBack=function(n,t,e){return M.mapFoldBack(n,M.ofSeq(t),e)},W.permute=function(n,t){return W.delay(function(){return M.permute(n,M.ofSeq(t))})},W.reduceBack=function(n,t){return M.reduceBack(n,M.ofSeq(t))},W.replicate=function(n,t){return n<0&&W.nonNegative(),W.delay(function(){return W.map(function(){return t},b.range(0,n-1))})},W.rev=function(n){return W.delay(function(){return M.ofSeq(n).slice().reverse()})},W.scanBack=function(n,t,e){return W.delay(function(){return M.scanBack(n,M.ofSeq(t),e)})},W.indexed=function(n){return W.mapi(function(n,t){return[n,t]},n)},W.sortWith=function(t,e){return W.delay(function(){var n=M.ofSeq(e);return M.sortInPlaceWith(t,n),n})},W.tail=function(n){return W.skip(1,n)},W.seqEmpty=function(){return b.FailWith("The input sequence was empty.")},An.CopyTo=function(n,t,e){M.blit(t,0,t,e,M.length(n))},An.Contains=function(n,t){return W.exists(function(n){return Gn.Equals(t,n)},n)},An.Clear=function(n){n.splice(0,M.length(n))},In.RegexEscape=function(n){return n.replace(new f.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&")},In.SplitWith=function(n,t){return n.split(t)},In.Join=function(n,t){return t.join(n)},In.TrimEndWS=function(n){return n.replace(new f.RegExp("\\s+$"),"")},In.TrimStartWS=function(n){return n.replace(new f.RegExp("^\\s+"),"")},In.Trim=function(n){return n.replace(new f.RegExp("^\\s+"),"").replace(new f.RegExp("\\s+$"),"")},In.StartsWith=function(n,t){return n.substring(0,t.length)==t},In.Substring=function(n,t,e){return n.substr(t,e)},In.ReplaceOnce=function(n,t,e){return n.replace(t,e)},In.Remove=function(n,t,e){return n.substring(0,t)+n.substring(t+e)},In.PadRightWith=function(n,t,e){return t>n.length?n+f.Array(t-n.length+1).join(e):n},In.PadLeftWith=function(n,t,e){return t>n.length?f.Array(t-n.length+1).join(e)+n:n},In.LastIndexOf=function(n,t,e){return n.lastIndexOf(t,e)},In.IsNullOrWhiteSpace=function(n){return null==n||new f.RegExp("^\\s*$").test(n)},In.IsNullOrEmpty=function(n){return null==n||""==n},In.Insert=function(n,t,e){return n.substring(0,t-1)+e+n.substring(t)},In.IndexOf=function(n,t,e){return n.indexOf(t,e)},In.EndsWith=function(n,t){return n.substring(n.length-t.length)==t},In.collect=function(t,e){return M.init(e.length,function(n){return t(e[n])}).join("")},In.concat=function(n,t){return M.ofSeq(t).join(n)},In.exists=function(n,t){return W.exists(n,In.protect(t))},In.forall=function(n,t){return W.forall(n,In.protect(t))},In.init=function(n,t){return M.init(n,t).join("")},In.iter=function(n,t){W.iter(n,In.protect(t))},In.iteri=function(n,t){W.iteri(n,In.protect(t))},In.length=function(n){return In.protect(n).length},In.map=function(n,t){return In.collect(n,In.protect(t))},In.mapi=function(n,t){return M.ofSeq(W.mapi(n,t)).join("")},In.replicate=function(n,t){return M.create(n,t).join("")},In.protect=function(n){return null===n?"":n},In.SFormat=function(n,o){return n.replace(new f.RegExp("{(0|[1-9]\\d*)(?:,(-?[1-9]\\d*|0))?(?::(.*?))?}","g"),function(n,t,e){var r=Ln(M.get(o,+t));return Gn.Equals(e,void 0)?r:(e=Vn.abs(t=+e))>r.length?0<t?In.PadLeft(r,e):In.PadRight(r,e):r})},In.Filter=function(t,n){return M.ofSeq(W.choose(function(n){return t(n)?{$:1,$0:n}:null},n)).join("")},In.SplitStrings=function(n,t,e){return In.Split(n,new f.RegExp(In.concat("|",M.map(In.RegexEscape,t))),e)},In.SplitChars=function(n,t,e){return In.Split(n,new f.RegExp("["+In.RegexEscape(t.join(""))+"]"),e)},In.Split=function(n,t,e){return 1===e?M.filter(function(n){return""!==n},In.SplitWith(n,t)):In.SplitWith(n,t)},In.TrimEnd=function(n,e){var r,o;if(Gn.Equals(e,null)||0==e.length)return In.TrimEndWS(n);for(r=n.length-1,o=!0;0<=r&&o;)!function(){var t=n[r];M.exists(function(n){return t===n},e)?r-=1:o=!1}();return In.Substring(n,0,r+1)},In.TrimStart=function(n,e){var r,o;if(Gn.Equals(e,null)||0==e.length)return In.TrimStartWS(n);for(o=!(r=0);r<n.length&&o;)!function(){var t=n[r];M.exists(function(n){return t===n},e)?r+=1:o=!1}();return n.substring(r)},In.ToCharArrayRange=function(t,e,n){return M.init(n,function(n){return t[e+n]})},In.ToCharArray=function(t){return M.init(t.length,function(n){return t[n]})},In.ReplaceChar=function(n,t,e){return In.Replace(n,t,e)},In.Replace=function(n,i,u){return function n(t){var e,r,o=t.indexOf(i);return-1!==o?(e=In.ReplaceOnce(t,i,u),r=o+u.length,In.Substring(e,0,o+u.length)+n(e.substring(r))):t}(n)},In.PadRight=function(n,t){return In.PadRightWith(n,t," ")},In.PadLeft=function(n,t){return In.PadLeftWith(n,t," ")},In.CopyTo=function(n,t,e,r,o){M.blit(In.ToCharArray(n),t,e,r,o)},In.Compare=function(n,t){return Gn.Compare(n,t)},(Pn=n.Task=Mn.Class({Start:function(){var e=this;0===this.status?(this.status=2,A.scheduler().Fork(function(){var t;e.status=3;try{e.Execute(),e.status=5}catch(n){n instanceof tn&&Gn.Equals(n.ct,e.token)&&(t=n,1)?(_n.log("Task cancellation caught:",t),e.exc=new an.New$3([t]),e.status=6):(_n.log("Task error caught:",n),e.exc=new an.New$3([n]),e.status=7)}e.RunContinuations()})):b.InvalidOp("Task not in initial state")},StartContinuation:function(){var t=this;1===this.status&&(this.status=2,A.scheduler().Fork(function(){if(2===t.status){t.status=3;try{t.Execute(),t.status=5}catch(n){t.exc=new an.New$3([n]),t.status=7}t.RunContinuations()}}))},ContinueWith:function(n,t){var e=this,t=new Fn.New$4(function(){return n(e)},t,1,null,void 0);return this.get_IsCompleted()?t.StartContinuation():this.continuations.push(t),t},ContinueWith$1:function(n,t){var e=this,t=new Pn.New$4(function(){return n(e)},t,1,null);return this.get_IsCompleted()?t.StartContinuation():this.continuations.push(t),t},RunContinuations:function(){for(var n=this.continuations,t=0,e=n.length-1;t<=e;t++)M.get(n,t).StartContinuation()},OnCompleted:function(n){this.get_IsCompleted()?n():(0===this.get_Status()&&this.Start(),this.ContinueWith$1(function(){return n()},A.noneCT()))},get_Status:function(){return this.status},get_IsFaulted:function(){return 7===this.status},get_IsCompleted:function(){return 5===this.status||7===this.status||6===this.status},get_IsCanceled:function(){return 6===this.status},get_Exception:function(){return this.exc},Execute:function(){this.action()}},u,Pn)).Yield=function(){return new Pn.New$3(function(){return null})},Pn.WhenAll=function(n){for(var e=M.length(n),r=[0],o=new f.Array(e),i=new qn.New,u=0,t=e-1;u<=t;u++)!function(t){M.get(n,u).ContinueWith$1(function(n){return n.get_IsFaulted()?void i.TrySetException$1(n.get_Exception()):n.get_IsCanceled()?void i.TrySetCanceled$1():(r[0]++,o[t]=n.get_Result(),r[0]===e?i.SetResult(o):null)},A.noneCT())}(u);return i.get_Task()},Pn.WhenAll$1=function(n){for(var t=M.length(n),e=[0],r=new qn.New,o=0,i=t-1;o<=i;o++)M.get(n,o).ContinueWith$1(function(n){return n.get_IsFaulted()?void r.TrySetException$1(n.get_Exception()):n.get_IsCanceled()?void r.TrySetCanceled$1():(e[0]++,e[0]===t?void r.TrySetResult():null)},A.noneCT());return r.get_Task()},Pn.WhenAny=function(n){for(var t=new qn.New,e=0,r=n.length-1;e<=r;e++)M.get(n,e).ContinueWith(function(n){t.TrySetResult(n)},A.noneCT());return t.get_Task()},Pn.WhenAny$1=function(n){for(var t=new qn.New,e=0,r=n.length-1;e<=r;e++)M.get(n,e).ContinueWith$1(function(n){t.TrySetResult(n)},A.noneCT());return t.get_Task()},Pn.Delay=function(n,t){return A.StartAsTask(A.Sleep(n),{$:1,$0:t})},Pn.Delay$1=function(n){return A.StartAsTask(A.Sleep(n),null)},Pn.Run=function(n,t){n=n();return t.c?Pn.FromCanceled(t):(0===n.get_Status()&&n.Start(),n)},Pn.Run$1=function(n,t){t=new Fn.New$4(n,t,0,null,void 0);return t.Start(),t},Pn.Run$2=function(n,t){n=n();return t.c?Pn.FromCanceled$1(t):(0===n.get_Status()&&n.Start(),n)},Pn.Run$3=function(n,t){t=new Pn.New$4(n,t,0,null);return t.Start(),t},Pn.FromResult=function(n){return new Fn.New$4(null,A.noneCT(),5,null,n)},Pn.FromException=function(n){return new Fn.New$4(null,A.noneCT(),7,new an.New$3([n]),null)},Pn.FromException$1=function(n){return new Pn.New$4(null,A.noneCT(),7,new an.New$3([n]))},Pn.FromCanceled=function(n){return new Fn.New$4(null,n,6,new an.New$3([new fn.New]),null)},Pn.FromCanceled$1=function(n){return new Pn.New$4(null,n,6,new an.New$3([new fn.New]))},Pn.New=Mn.Ctor(function(n,t,e){Pn.New$4.call(this,function(){return n(t)},e,0,null)},Pn),Pn.New$1=Mn.Ctor(function(n,t){Pn.New$4.call(this,function(){return n(t)},A.noneCT(),0,null)},Pn),Pn.New$2=Mn.Ctor(function(n,t){Pn.New$4.call(this,n,t,0,null)},Pn),Pn.New$3=Mn.Ctor(function(n){Pn.New$4.call(this,n,A.noneCT(),0,null)},Pn),Pn.New$4=Mn.Ctor(function(n,t,e,r){u.New.call(this),this.action=n,this.token=t,this.status=e,this.continuations=[],this.exc=r},Pn),(Fn=n.Task1=Mn.Class({Execute:function(){this.result=this.func()},get_Result:function(){switch(this.get_Status()){case 5:return this.result;case 7:case 6:throw this.get_Exception();default:return b.InvalidOp("Task has not been completed, has no Result")}}},Pn,Fn)).New=Mn.Ctor(function(n,t,e){Fn.New$4.call(this,function(){return n(t)},e,0,null,void 0)},Fn),Fn.New$1=Mn.Ctor(function(n,t){Fn.New$4.call(this,function(){return n(t)},A.noneCT(),0,null,void 0)},Fn),Fn.New$2=Mn.Ctor(function(n,t){Fn.New$4.call(this,n,t,0,null,void 0)},Fn),Fn.New$3=Mn.Ctor(function(n){Fn.New$4.call(this,n,A.noneCT(),0,null,void 0)},Fn),Fn.New$4=Mn.Ctor(function(n,t,e,r,o){Pn.New$4.call(this,null,t,e,r),this.func=n,this.result=o},Fn),(qn=n.TaskCompletionSource=Mn.Class({TrySetResult:function(n){return!this.task.get_IsCompleted()&&(this.task.status=5,this.task.result=n,this.task.RunContinuations(),!0)},TrySetException:function(n){return this.TrySetException$1(new an.New$2(n))},TrySetException$1:function(n){return!this.task.get_IsCompleted()&&(this.task.status=7,this.task.exc=new an.New$3([n]),this.task.RunContinuations(),!0)},TrySetCanceled:function(n){return!this.task.get_IsCompleted()&&(this.task.status=6,this.task.token=n,this.task.RunContinuations(),!0)},TrySetCanceled$1:function(){return!this.task.get_IsCompleted()&&(this.task.status=6,this.task.RunContinuations(),!0)},SetResult:function(n){this.task.get_IsCompleted()&&b.FailWith("Task already completed."),this.task.status=5,this.task.result=n,this.task.RunContinuations()},SetException:function(n){this.SetException$1(new an.New$2(n))},SetException$1:function(n){this.task.get_IsCompleted()&&b.FailWith("Task already completed."),this.task.status=7,this.task.exc=new an.New$3([n]),this.task.RunContinuations()},SetCanceled:function(){this.task.get_IsCompleted()&&b.FailWith("Task already completed."),this.task.status=6,this.task.RunContinuations()},get_Task:function(){return this.task}},u,qn)).New=Mn.Ctor(function(){u.New.call(this),this.task=new Fn.New$4(null,A.noneCT(),1,null,void 0)},qn),Gn.Hash=function(n){var t=typeof n;return"function"==t?0:"boolean"==t?n?1:0:"number"==t?n:"string"==t?Gn.hashString(n):"object"!=t||null==n?0:n instanceof f.Array?Gn.hashArray(n):Gn.hashObject(n)},Gn.hashObject=function(n){var t,e,r;if("GetHashCode"in n)return n.GetHashCode();for(e in t=[0],n)r=e,void(t[0]=Gn.hashMix(Gn.hashMix(t[0],Gn.hashString(r)),Gn.Hash(n[r])));return t[0]},Gn.hashString=function(n){var t,e,r;if(null===n)return 0;for(t=5381,e=0,r=n.length-1;e<=r;e++)t=Gn.hashMix(t,n[e].charCodeAt());return t},Gn.hashArray=function(n){for(var t=-34948909,e=0,r=M.length(n)-1;e<=r;e++)t=Gn.hashMix(t,Gn.Hash(M.get(n,e)));return t},Gn.hashMix=function(n,t){return(n<<5)+n+t},Gn.Equals=function(n,t){var e,r,o,i;if(n===t)return!0;if("object"!=(e=typeof n))return"function"==e&&("$Func"in n?n.$Func===t.$Func&&n.$Target===t.$Target:"$Invokes"in n&&"$Invokes"in t&&Gn.arrayEquals(n.$Invokes,t.$Invokes));if(null==n||null==t)return!1;if("Equals"in n)return n.Equals(t);if(n instanceof f.Array&&t instanceof f.Array)return Gn.arrayEquals(n,t);if(n instanceof jn&&t instanceof jn)return Gn.dateEquals(n,t);for(o in r=[!0],n)if(i=o,r[0]=!n.hasOwnProperty(i)||t.hasOwnProperty(i)&&Gn.Equals(n[i],t[i]),!r[0])break;if(r[0])for(var u in t)if(u=u,r[0]=!t.hasOwnProperty(u)||n.hasOwnProperty(u),!r[0])break;return r[0]},Gn.dateEquals=function(n,t){return n.getTime()===t.getTime()},Gn.arrayEquals=function(n,t){var e,r;if(M.length(n)!==M.length(t))return!1;for(e=!0,r=0;e&&r<M.length(n);)Gn.Equals(M.get(n,r),M.get(t,r))||(e=!1),r+=1;return e},Gn.Compare=function(n,t){var e,r,o;if(n===t)return 0;switch("function"==(e=typeof n)?1:"boolean"==e||"number"==e||"string"==e?2:"object"==e?3:0){case 0:return void 0===t?0:-1;case 1:return b.FailWith("Cannot compare function values.");case 2:return n<t?-1:1;case 3:if(null===n)r=-1;else if(null===t)r=1;else if("CompareTo"in n)r=n.CompareTo(t);else if("CompareTo0"in n)r=n.CompareTo0(t);else if(n instanceof f.Array&&t instanceof f.Array)r=Gn.compareArrays(n,t);else if(n instanceof jn&&t instanceof jn)r=Gn.compareDates(n,t);else{for(var i in o=[0],n)if(i=i,n.hasOwnProperty(i)&&(t.hasOwnProperty(i)?(o[0]=Gn.Compare(n[i],t[i]),0!==o[0]):o[0]=1))break;if(0===o[0])for(var u in t)if(u=u,t.hasOwnProperty(u)&&(!n.hasOwnProperty(u)&&(o[0]=-1)))break;r=o[0]}return r}},Gn.compareDates=function(n,t){return Gn.Compare(n.getTime(),t.getTime())},Gn.compareArrays=function(n,t){var e,r;if(M.length(n)<M.length(t))return-1;if(M.length(n)>M.length(t))return 1;for(r=e=0;0===e&&r<M.length(n);)e=Gn.Compare(M.get(n,r),M.get(t,r)),r+=1;return e},On.ValueNone={$:0},On.get_Value=function(n){return 1==n.$?n.$0:b.InvalidOp("ValueOption.Value")},vn.filter=function(n,t){return 1==t.$&&n(t.$0)?t:On.ValueNone},vn.fold=function(n,t,e){return 0==e.$?t:n(t,e.$0)},vn.foldBack=function(n,t,e){return 0==t.$?e:n(t.$0,e)},vn.ofNullable=function(n){return null==n?On.ValueNone:{$:1,$0:D.get(n)}},vn.ofObj=function(n){return null==n?On.ValueNone:{$:1,$0:n}},vn.toArray=function(n){return 0==n.$?[]:[n.$0]},vn.toList=function(n){return 0==n.$?Nn.Empty:R.ofArray([n.$0])},vn.toNullable=function(n){return 1==n.$?n.$0:null},vn.toObj=function(n){return 0==n.$?null:n.$0},Bn.TryParseBool=function(n,t){n=n.toLowerCase();return"true"===n?(t.set(!0),!0):"false"===n&&(t.set(!1),!0)},Bn.ParseBool=function(n){n=n.toLowerCase();if("true"===n)return!0;if("false"===n)return!1;throw new sn.New$1("String was not recognized as a valid Boolean.")},Bn.TryParse=function(n,t,e,r){n=+n,e=n==n-n%1&&t<=n&&n<=e;return e&&r.set(n),e},Bn.Parse=function(n,t,e,r){n=+n;if(n!=n-n%1)throw new sn.New$1("Input string was not in a correct format.");if(n<t||e<n)throw new ln.New$1(r);return n},Bn.ParseByte=function(n){return Bn.Parse(n,0,255,"Value was either too large or too small for an unsigned byte.")},Bn.TryParseByte=function(n,t){return Bn.TryParse(n,0,255,t)},Bn.ParseSByte=function(n){return Bn.Parse(n,-128,127,"Value was either too large or too small for a signed byte.")},Bn.TryParseSByte=function(n,t){return Bn.TryParse(n,-128,127,t)},Bn.ParseInt16=function(n){return Bn.Parse(n,-32768,32767,"Value was either too large or too small for an Int16.")},Bn.TryParseInt16=function(n,t){return Bn.TryParse(n,-32768,32767,t)},Bn.ParseInt32=function(n){return Bn.Parse(n,-2147483648,2147483647,"Value was either too large or too small for an Int32.")},Bn.TryParseInt32=function(n,t){return Bn.TryParse(n,-2147483648,2147483647,t)},Bn.ParseUInt16=function(n){return Bn.Parse(n,0,65535,"Value was either too large or too small for an UInt16.")},Bn.TryParseUInt16=function(n,t){return Bn.TryParse(n,0,65535,t)},Bn.ParseUInt32=function(n){return Bn.Parse(n,0,4294967295,"Value was either too large or too small for an UInt32.")},Bn.TryParseUInt32=function(n,t){return Bn.TryParse(n,0,4294967295,t)},Bn.ParseInt64=function(n){return Bn.Parse(n,-0x8000000000000000,0x8000000000000000,"Value was either too large or too small for an Int64.")},Bn.TryParseInt64=function(n,t){return Bn.TryParse(n,-0x8000000000000000,0x8000000000000000,t)},Bn.ParseUInt64=function(n){return Bn.Parse(n,0,0x10000000000000000,"Value was either too large or too small for an UInt64.")},Bn.TryParseUInt64=function(n,t){return Bn.TryParse(n,0,0x10000000000000000,t)}}();