!function(){"use strict";var c=self,n=c.WebSharper,o=n&&n.Obj,t=n.Forms=n.Forms||{},i=t.ErrorMessage=t.ErrorMessage||{},u=t.Fresh=t.Fresh||{},a=t.Result=t.Result||{},$=t.Form=t.Form||{},r=t.Utils=t.Utils||{},s=$.Dependent=$.Dependent||{},f=$.Many=$.Many||{},d=f.ItemOperations=f.ItemOperations||{},p=f.Fresh=f.Fresh||{},l=f.Collection=f.Collection||{},w=f.CollectionWithDefault=f.CollectionWithDefault||{},e=$.Builder=$.Builder||{},h=t.Validation=t.Validation||{},v=t.Pervasives=t.Pervasives||{},M=t.Attr=t.Attr||{},m=t.Doc=t.Doc||{},y=t.View=t.View||{},N=c.StartupCode$WebSharper_Forms$Forms=c.StartupCode$WebSharper_Forms$Forms||{},I=c.IntelliFactory,C=I&&I.Runtime,g=n&&n.List,I=n&&n.Collections,R=I&&I.Dictionary,I=n&&n.UI,A=I&&I.Doc,V=I&&I.View,E=I&&I.Var$1,F=n&&n.Seq,_=I&&I.Submitter,T=n&&n.Arrays,D=I&&I.Array,S=n&&n.Concurrency,b=n&&n.Unchecked,B=I&&I.AttrProxy,O=I&&I.AttrModule;(i=t.ErrorMessage=C.Class({},o,i)).Create=function(n,t){return new i.New(n.id,t)},i.Create$1=function(n,t){return new i.New(n,t)},i.New=C.Ctor(function(n,t){o.New.call(this),this.id=n,this.message=t},i),u.Id=function(){return u.lastId()[0]++,"Form"+c.String(u.lastId()[0])},u.lastId=function(){return N.$cctor(),N.lastId},a.FailWith=function(n,t){return{$:1,$0:g.ofArray([new i.New(null==t?u.Id():t.$0,n)])}},a.Append=function(n,t,e){return 0==t.$?0==e.$?{$:0,$0:n(t.$0,e.$0)}:e:0==e.$?t:{$:1,$0:g.append(t.$0,e.$0)}},a.Bind=function(n,t){return 0==t.$?n(t.$0):{$:1,$0:t.$0}},a.ApJoin=function(n,t){var e;return 0==n.$?(0==t.$?0==t.$0.$?(e=t.$0.$0,0):(e=t.$0.$0,1):(e=t.$0,1))?{$:1,$0:e}:{$:0,$0:n.$0(e)}:0==t.$?{$:1,$0:n.$0}:{$:1,$0:g.append(n.$0,t.$0)}},a.Apply=function(n,t){return 0==n.$?0==t.$?{$:0,$0:n.$0(t.$0)}:{$:1,$0:t.$0}:0==t.$?{$:1,$0:n.$0}:{$:1,$0:g.append(n.$0,t.$0)}},a.Map=function(n,t){return 1==t.$?{$:1,$0:t.$0}:{$:0,$0:n(t.$0)}},a.IsFailure=function(n){return 1==n.$},a.IsSuccess=function(n){return 1!=n.$},$.New=function(n,t,e){return{id:n,view:t,render:e}},r.memoize=function(e){var r=new R.New$5;return function(n){var t;return r.ContainsKey(n)?r.get_Item(n):(t=e(n),r.set_Item(n,t),t)}},(s=$.Dependent=C.Class({RenderDependent:function(t){return A.BindView(function(n){return 1==n.$?A.get_Empty():n.$0.render(t)},this.pOut)}},o,s)).New=C.Ctor(function(n,t){o.New.call(this),this.renderPrimary=n,this.pOut=t,this.out=V.Bind(function(n){return 1==n.$?V.Const({$:1,$0:n.$0}):n.$0.view},this.pOut)},s),s.Make=function(n,t){var e;return new s.New(n.render,V.Map((e=r.memoize(function(n){n=t(n);return $.New(n.id,n.view,n.render)}),function(n){return a.Map(e,n)}),n.view))},(d=f.ItemOperations=C.Class({},o,d)).New=C.Ctor(function(n,t,e){o.New.call(this),this.delete=n,this.moveUp=t,this.moveDown=e},d),p.Int=function(){return N.$cctor(),N.Int},(l=f.Collection=C.Class({adderView:function(n){return 0==n.$&&this.add(n.$0),A.get_Empty()},add:function(n){this.arr.push(this.mk(n)),E.Update(this.var,c.id)},fst3:c.id,mk:function(n){var e,t,r,i,u,o,a;return e=this,t=p.Int()(),a=V.Map(r=function(n){return F.findIndex(function(n){return n[0],n[1],n=n[2],t===n},n)},this.var.get_View()),i=new _.New(V.Map(function(n){return 0===n?{$:1,$0:g.T.Empty}:{$:0,$0:!0}},a),0===T.length(this.arr)?{$:1,$0:g.T.Empty}:{$:0,$0:!1}),u=V.Map(function(n){0==n.$&&n.$0&&(n=r(e.arr),f["List`1.Swap"](e.arr,n,n-1),E.Update(e.var,c.id))},i.view),o=new _.New(V.Map(function(n){return n===T.length(e.arr)-1?{$:1,$0:g.T.Empty}:{$:0,$0:!0}},a),{$:1,$0:g.T.Empty}),a=V.Map(function(n){0==n.$&&n.$0&&(n=r(e.arr),f["List`1.Swap"](e.arr,n,n+1),E.Update(e.var,c.id))},o.view),n=this.p(n),[$.New(n.id,V.Map2(c.id,n.view,V.Map2(function(){return null},u,a)),n.render),new d.New(function(){var n=e.arr,t=r(e.arr);n.splice.apply(n,[t,1]),E.Update(e.var,c.id)},i,o),t]},RenderAdder:function(n){var t=this,n=this.adder.render(n);return A.Append(A.EmbedView(V.Map(function(n){return t.adderView(n)},this.adder.view)),n)},Render:function(r){return A.ConvertBy(function(n){return n[0],n[1],n[2]},function(n){return t=n[0],e=n[1],n[2],t.render(r(e));var t,e},this.changesView)}},o,l)).New=C.Ctor(function(n,t,e){var r,i,u;o.New.call(r=this),this.p=n,this.adder=e,this.arr=[],this.var=E.Create$1(this.arr),F.iter((u=this.arr,i=function(n){u.push(n)},function(n){return i((n=n,r.mk(n)))}),t),this.changesView=V.Bind(function(n){n=n.slice();return D.MapTreeReduce(function(n){return V.Map(function(){return[n]},r.fst3(n[0],n[1],n[2]).view)},V.Const([]),function(n,t){return V.Map2(F.append,n,t)},n)},this.var.get_View()),this.out=V.Bind(function(n){var t,e;return t=n.slice(),n=V.Const({$:0,$0:[]}),e=C.Curried3(V.Map2)(function(n,t){return a.Append(F.append,n,t)}),D.MapTreeReduce(function(n){return e=n[0],n[1],n[2],V.Map(function(n){return a.Map(t,n)},e.view);function t(n){return[n]}var e},n,function(n,t){return e(n)(t)},t)},this.var.get_View())},l),(w=f.CollectionWithDefault=C.Class({AddOne:function(){this.add(this.default)}},l,w)).New=C.Ctor(function(n,t,e,r){l.New.call(this,n,t,e),this.default=r},w),f["List`1.Swap"]=function(n,t,e){var r=T.get(n,t);T.set(n,t,T.get(n,e)),T.set(n,e,r)},e.Do={$:0},$.Dependent$1=function(n,t){var e=s.Make(n,t);return $.New(u.Id(),e.out,function(n){return n(e)})},$.Many$1=function(n,t,e){var r=new w.New(e,n,e(t),t);return $.New(u.Id(),r.out,function(n){return n(r)})},$.ManyForm=function(n,t,e){var r=new l.New(e,n,t);return $.New(u.Id(),r.out,function(n){return n(r)})},$.RunResult=function(t,n){return $.MapResult(function(n){return t(n),n},n)},$.Run=function(t,n){return $.Map(function(n){return t(n),n},n)},$.FlushErrors=function(n){return $.MapResult(function(n){return 1==n.$?{$:1,$0:g.T.Empty}:n},n)},$.MapRenderArgs=function(t,e){return $.New(e.id,e.view,function(n){return n(e.render(t))})},$.MapAsync=function(r,n){return $.MapAsyncResult(function(n){var t,e;return 1==n.$?(t=n.$0,S.Delay(function(){return S.Return({$:1,$0:t})})):(e=n.$0,S.Delay(function(){return S.Bind(r(e),function(n){return S.Return({$:0,$0:n})})}))},n)},$.MapToAsyncResult=function(r,n){return $.MapAsyncResult(function(n){var t,e;return 1==n.$?(t=n.$0,S.Delay(function(){return S.Return({$:1,$0:t})})):(e=n.$0,S.Delay(function(){return r(e)}))},n)},$.MapAsyncResult=function(n,t){return $.New(t.id,V.MapAsync(n,t.view),t.render)},$.Map=function(t,n){return $.MapResult(function(n){return a.Map(t,n)},n)},$.MapToResult=function(t,n){return $.MapResult(function(n){return a.Bind(t,n)},n)},$.MapResult=function(n,t){return $.New(t.id,V.Map(n,t.view),t.render)},$.TransmitViewMap=function(t,n){return $.TransmitViewMapResult(function(n){return a.Map(t,n)},n)},$.TransmitViewMapResult=function(t,e){return $.New(e.id,e.view,function(n){return e.render(n)(V.Map(t,e.view))})},$.TransmitView=function(t){return $.New(t.id,t.view,function(n){return t.render(n)(t.view)})},$.WithSubmit=function(t){var e=new _.New(t.view,{$:1,$0:g.T.Empty});return $.New(u.Id(),e.view,function(n){return t.render(n)(e)})},$.ApJoin=function(n,t){var e,r;return $.New(u.Id(),V.Map2(a.ApJoin,n.view,t.view),(e=n.render,r=t.render,function(n){return r(e(n))}))},$.Apply=function(n,t){var e,r;return $.New(u.Id(),V.Map2(a.Apply,n.view,t.view),(e=n.render,r=t.render,function(n){return r(e(n))}))},$.YieldOption=function(n,t){var e=E.Create$1(null==n?t:n.$0);return $.New(e.get_Id(),V.Map(function(n){return{$:0,$0:b.Equals(n,t)?null:{$:1,$0:n}}},e.get_View()),function(n){return n(e)})},$.YieldFailure=function(){var t=E.Create$1(void 0),n=t.get_View();return $.New(t.get_Id(),V.SnapshotOn({$:1,$0:g.T.Empty},n,V.Map(function(n){return{$:0,$0:n}},n)),function(n){return n(t)})},$.Yield=function(n){return $.YieldVar(E.Create$1(n))},$.YieldVar=function(t){return $.New(t.get_Id(),V.Map(function(n){return{$:0,$0:n}},t.get_View()),function(n){return n(t)})},$.ReturnFailure=function(){return $.New(u.Id(),V.Const({$:1,$0:g.T.Empty}),c.id)},$.Return=function(n){return $.New(u.Id(),V.Const({$:0,$0:n}),c.id)},$.Render=function(n,t){n=t.render(n);return A.Append(A.EmbedView(V.Map(function(){return A.get_Empty()},t.view)),n)},$.Create=function(n,t){return $.New(u.Id(),n,t)},h.MapValidCheckedInput=function(t,e){return $.MapResult(function(n){return 1==n.$?{$:1,$0:n.$0}:0==n.$0.$?{$:0,$0:n.$0.$0}:{$:1,$0:g.ofArray([i.Create(e,t)])}},e)},h.IsMatch=function(n,t,e){var r;return h.Is((r=new c.RegExp(n),function(n){return r.test(n)}),t,e)},h.IsNotEmpty=function(n,t){return h.Is(function(n){return""!==n},n,t)},h.Is=function(t,e,r){return $.MapResult(function(n){return 1==n.$||t(n.$0)?n:{$:1,$0:g.ofArray([new i.New(r.id,e)])}},r)},v.op_LessMultiplyQmarkGreater=function(n,t){return $.ApJoin(n,t)},v.op_LessMultiplyGreater=function(n,t){return $.Apply(n,t)},M.SubmitterValidate=function(n){var t;return B.Append(O.Handler("click",function(){return function(){return n.Trigger()}}),(t=V.Const("disabled"),O.DynamicPred("disabled",V.Map(a.IsFailure,n.input),t)))},m.ShowSuccess=function(n,t){return A.BindView(function(n){return 1==n.$?A.get_Empty():t(n.$0)},n)},m.ShowErrors=function(n,t){return A.BindView(function(n){return 1==n.$?t(n.$0):A.get_Empty()},n)},m.ButtonValidate=function(n,t,e){return A.Element("button",F.append([M.SubmitterValidate(e)],t),[A.TextNode(n)])},y.Through=function(n,t){return V.Map(function(n){return 1==n.$?{$:1,$0:g.filter(function(n){return n.id===t.id},n.$0)}:n},n)},y.Through$1=function(n,t){return V.Map(function(n){return 1==n.$?{$:1,$0:g.filter(function(n){return n.id===t.get_Id()},n.$0)}:n},n)},N.$cctor=function(){var n;N.$cctor=c.ignore,N.lastId=[0],N.Int=(n=[0],function(){return n[0]++,n[0]})}}();